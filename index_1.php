var tns=function(){var t=window,Ai=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.msRequestAnimationFrame||function(t){return setTimeout(t,16)},e=window,Ni=e.cancelAnimationFrame||e.mozCancelAnimationFrame||function(t){clearTimeout(t)};function Li(){for(var t,e,n,i=arguments[0]||{},a=1,r=arguments.length;a<r;a++)if(null!==(t=arguments[a]))for(e in t)i!==(n=t[e])&&void 0!==n&&(i[e]=n);return i}function Bi(t){return 0<=["true","false"].indexOf(t)?JSON.parse(t):t}function Si(t,e,n,i){if(i)try{t.setItem(e,n)}catch(t){}return n}function Hi(){var t=document,e=t.body;return e||((e=t.createElement("body")).fake=!0),e}var n=document.documentElement;function Oi(t){var e="";return t.fake&&(e=n.style.overflow,t.style.background="",t.style.overflow=n.style.overflow="hidden",n.appendChild(t)),e}function Di(t,e){t.fake&&(t.remove(),n.style.overflow=e,n.offsetHeight)}function ki(t,e,n,i){"insertRule"in t?t.insertRule(e+"{"+n+"}",i):t.addRule(e,n,i)}function Ri(t){return("insertRule"in t?t.cssRules:t.rules).length}function Ii(t,e,n){for(var i=0,a=t.length;i<a;i++)e.call(n,t[i],i)}var i="classList"in document.createElement("_"),Pi=i?function(t,e){return t.classList.contains(e)}:function(t,e){return 0<=t.className.indexOf(e)},zi=i?function(t,e){Pi(t,e)||t.classList.add(e)}:function(t,e){Pi(t,e)||(t.className+=" "+e)},Wi=i?function(t,e){Pi(t,e)&&t.classList.remove(e)}:function(t,e){Pi(t,e)&&(t.className=t.className.replace(e,""))};function qi(t,e){return t.hasAttribute(e)}function Fi(t,e){return t.getAttribute(e)}function r(t){return void 0!==t.item}function ji(t,e){if(t=r(t)||t instanceof Array?t:[t],"[object Object]"===Object.prototype.toString.call(e))for(var n=t.length;n--;)for(var i in e)t[n].setAttribute(i,e[i])}function Vi(t,e){t=r(t)||t instanceof Array?t:[t];for(var n=(e=e instanceof Array?e:[e]).length,i=t.length;i--;)for(var a=n;a--;)t[i].removeAttribute(e[a])}function Gi(t){for(var e=[],n=0,i=t.length;n<i;n++)e.push(t[n]);return e}function Qi(t,e){"none"!==t.style.display&&(t.style.display="none")}function Xi(t,e){"none"===t.style.display&&(t.style.display="")}function Yi(t){return"none"!==window.getComputedStyle(t).display}function Ki(e){if("string"==typeof e){var n=[e],i=e.charAt(0).toUpperCase()+e.substr(1);["Webkit","Moz","ms","O"].forEach(function(t){"ms"===t&&"transform"!==e||n.push(t+i)}),e=n}for(var t=document.createElement("fakeelement"),a=(e.length,0);a<e.length;a++){var r=e[a];if(void 0!==t.style[r])return r}return!1}function Ji(t,e){var n=!1;return/^Webkit/.test(t)?n="webkit"+e+"End":/^O/.test(t)?n="o"+e+"End":t&&(n=e.toLowerCase()+"end"),n}var a=!1;try{var o=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("test",null,o)}catch(t){}var u=!!a&&{passive:!0};function Ui(t,e,n){for(var i in e){var a=0<=["touchstart","touchmove"].indexOf(i)&&!n&&u;t.addEventListener(i,e[i],a)}}function _i(t,e){for(var n in e){var i=0<=["touchstart","touchmove"].indexOf(n)&&u;t.removeEventListener(n,e[n],i)}}function Zi(){return{topics:{},on:function(t,e){this.topics[t]=this.topics[t]||[],this.topics[t].push(e)},off:function(t,e){if(this.topics[t])for(var n=0;n<this.topics[t].length;n++)if(this.topics[t][n]===e){this.topics[t].splice(n,1);break}},emit:function(e,n){n.type=e,this.topics[e]&&this.topics[e].forEach(function(t){t(n,e)})}}}Object.keys||(Object.keys=function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}),"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)});var $i=function(H){H=Li({container:".slider",mode:"carousel",axis:"horizontal",items:1,gutter:0,edgePadding:0,fixedWidth:!1,autoWidth:!1,viewportMax:!1,slideBy:1,center:!1,controls:!0,controlsPosition:"top",controlsText:["prev","next"],controlsContainer:!1,prevButton:!1,nextButton:!1,nav:!0,navPosition:"top",navContainer:!1,navAsThumbnails:!1,arrowKeys:!1,speed:300,autoplay:!1,autoplayPosition:"top",autoplayTimeout:5e3,autoplayDirection:"forward",autoplayText:["start","stop"],autoplayHoverPause:!1,autoplayButton:!1,autoplayButtonOutput:!0,autoplayResetOnVisibility:!0,animateIn:"tns-fadeIn",animateOut:"tns-fadeOut",animateNormal:"tns-normal",animateDelay:!1,loop:!0,rewind:!1,autoHeight:!1,responsive:!1,lazyload:!1,lazyloadSelector:".tns-lazy-img",touch:!0,mouseDrag:!1,swipeAngle:15,nested:!1,preventActionWhenRunning:!1,preventScrollOnTouch:!1,freezable:!0,onInit:!1,useLocalStorage:!0,nonce:!1},H||{});var O=document,m=window,a={ENTER:13,SPACE:32,LEFT:37,RIGHT:39},e={},n=H.useLocalStorage;if(n){var t=navigator.userAgent,i=new Date;try{(e=m.localStorage)?(e.setItem(i,i),n=e.getItem(i)==i,e.removeItem(i)):n=!1,n||(e={})}catch(t){n=!1}n&&(e.tnsApp&&e.tnsApp!==t&&["tC","tPL","tMQ","tTf","t3D","tTDu","tTDe","tADu","tADe","tTE","tAE"].forEach(function(t){e.removeItem(t)}),localStorage.tnsApp=t)}var y=e.tC?Bi(e.tC):Si(e,"tC",function(){var t=document,e=Hi(),n=Oi(e),i=t.createElement("div"),a=!1;e.appendChild(i);try{for(var r,o="(10px * 10)",u=["calc"+o,"-moz-calc"+o,"-webkit-calc"+o],l=0;l<3;l++)if(r=u[l],i.style.width=r,100===i.offsetWidth){a=r.replace(o,"");break}}catch(t){}return e.fake?Di(e,n):i.remove(),a}(),n),g=e.tPL?Bi(e.tPL):Si(e,"tPL",function(){var t,e=document,n=Hi(),i=Oi(n),a=e.createElement("div"),r=e.createElement("div"),o="";a.className="tns-t-subp2",r.className="tns-t-ct";for(var u=0;u<70;u++)o+="<div></div>";return r.innerHTML=o,a.appendChild(r),n.appendChild(a),t=Math.abs(a.getBoundingClientRect().left-r.children[67].getBoundingClientRect().left)<2,n.fake?Di(n,i):a.remove(),t}(),n),D=e.tMQ?Bi(e.tMQ):Si(e,"tMQ",function(){if(window.matchMedia||window.msMatchMedia)return!0;var t,e=document,n=Hi(),i=Oi(n),a=e.createElement("div"),r=e.createElement("style"),o="@media all and (min-width:1px){.tns-mq-test{position:absolute}}";return r.type="text/css",a.className="tns-mq-test",n.appendChild(r),n.appendChild(a),r.styleSheet?r.styleSheet.cssText=o:r.appendChild(e.createTextNode(o)),t=window.getComputedStyle?window.getComputedStyle(a).position:a.currentStyle.position,n.fake?Di(n,i):a.remove(),"absolute"===t}(),n),r=e.tTf?Bi(e.tTf):Si(e,"tTf",Ki("transform"),n),o=e.t3D?Bi(e.t3D):Si(e,"t3D",function(t){if(!t)return!1;if(!window.getComputedStyle)return!1;var e,n=document,i=Hi(),a=Oi(i),r=n.createElement("p"),o=9<t.length?"-"+t.slice(0,-9).toLowerCase()+"-":"";return o+="transform",i.insertBefore(r,null),r.style[t]="translate3d(1px,1px,1px)",e=window.getComputedStyle(r).getPropertyValue(o),i.fake?Di(i,a):r.remove(),void 0!==e&&0<e.length&&"none"!==e}(r),n),x=e.tTDu?Bi(e.tTDu):Si(e,"tTDu",Ki("transitionDuration"),n),u=e.tTDe?Bi(e.tTDe):Si(e,"tTDe",Ki("transitionDelay"),n),b=e.tADu?Bi(e.tADu):Si(e,"tADu",Ki("animationDuration"),n),l=e.tADe?Bi(e.tADe):Si(e,"tADe",Ki("animationDelay"),n),s=e.tTE?Bi(e.tTE):Si(e,"tTE",Ji(x,"Transition"),n),c=e.tAE?Bi(e.tAE):Si(e,"tAE",Ji(b,"Animation"),n),f=m.console&&"function"==typeof m.console.warn,d=["container","controlsContainer","prevButton","nextButton","navContainer","autoplayButton"],v={};if(d.forEach(function(t){if("string"==typeof H[t]){var e=H[t],n=O.querySelector(e);if(v[t]=e,!n||!n.nodeName)return void(f&&console.warn("Can't find",H[t]));H[t]=n}}),!(H.container.children.length<1)){var k=H.responsive,R=H.nested,I="carousel"===H.mode;if(k){0 in k&&(H=Li(H,k[0]),delete k[0]);var p={};for(var h in k){var w=k[h];w="number"==typeof w?{items:w}:w,p[h]=w}k=p,p=null}if(I||function t(e){for(var n in e)I||("slideBy"===n&&(e[n]="page"),"edgePadding"===n&&(e[n]=!1),"autoHeight"===n&&(e[n]=!1)),"responsive"===n&&t(e[n])}(H),!I){H.axis="horizontal",H.slideBy="page",H.edgePadding=!1;var P=H.animateIn,z=H.animateOut,C=H.animateDelay,W=H.animateNormal}var M,q,F="horizontal"===H.axis,T=O.createElement("div"),j=O.createElement("div"),V=H.container,E=V.parentNode,A=V.outerHTML,G=V.children,Q=G.length,X=rn(),Y=!1;k&&En(),I&&(V.className+=" tns-vpfix");var N,L,B,S,K,J,U,_,Z,$=H.autoWidth,tt=sn("fixedWidth"),et=sn("edgePadding"),nt=sn("gutter"),it=un(),at=sn("center"),rt=$?1:Math.floor(sn("items")),ot=sn("slideBy"),ut=H.viewportMax||H.fixedWidthViewportWidth,lt=sn("arrowKeys"),st=sn("speed"),ct=H.rewind,ft=!ct&&H.loop,dt=sn("autoHeight"),vt=sn("controls"),pt=sn("controlsText"),ht=sn("nav"),mt=sn("touch"),yt=sn("mouseDrag"),gt=sn("autoplay"),xt=sn("autoplayTimeout"),bt=sn("autoplayText"),wt=sn("autoplayHoverPause"),Ct=sn("autoplayResetOnVisibility"),Mt=(U=null,_=sn("nonce"),Z=document.createElement("style"),U&&Z.setAttribute("media",U),_&&Z.setAttribute("nonce",_),document.querySelector("head").appendChild(Z),Z.sheet?Z.sheet:Z.styleSheet),Tt=H.lazyload,Et=H.lazyloadSelector,At=[],Nt=ft?(K=function(){{if($||tt&&!ut)return Q-1;var t=tt?"fixedWidth":"items",e=[];if((tt||H[t]<Q)&&e.push(H[t]),k)for(var n in k){var i=k[n][t];i&&(tt||i<Q)&&e.push(i)}return e.length||e.push(0),Math.ceil(tt?ut/Math.min.apply(null,e):Math.max.apply(null,e))}}(),J=I?Math.ceil((5*K-Q)/2):4*K-Q,J=Math.max(K,J),ln("edgePadding")?J+1:J):0,Lt=I?Q+2*Nt:Q+Nt,Bt=!(!tt&&!$||ft),St=tt?_n():null,Ht=!I||!ft,Ot=F?"left":"top",Dt="",kt="",Rt=tt?function(){return at&&!ft?Q-1:Math.ceil(-St/(tt+nt))}:$?function(){for(var t=0;t<Lt;t++)if(N[t]>=-St)return t}:function(){return at&&I&&!ft?Q-1:ft||I?Math.max(0,Lt-Math.ceil(rt)):Lt-1},It=en(sn("startIndex")),Pt=It,zt=(tn(),0),Wt=$?null:Rt(),qt=H.preventActionWhenRunning,Ft=H.swipeAngle,jt=!Ft||"?",Vt=!1,Gt=H.onInit,Qt=new Zi,Xt=" tns-slider tns-"+H.mode,Yt=V.id||(S=window.tnsId,window.tnsId=S?S+1:1,"tns"+window.tnsId),Kt=sn("disable"),Jt=!1,Ut=H.freezable,_t=!(!Ut||$)&&Tn(),Zt=!1,$t={click:oi,keydown:function(t){t=pi(t);var e=[a.LEFT,a.RIGHT].indexOf(t.keyCode);0<=e&&(0===e?we.disabled||oi(t,-1):Ce.disabled||oi(t,1))}},te={click:function(t){if(Vt){if(qt)return;ai()}var e=hi(t=pi(t));for(;e!==Ae&&!qi(e,"data-nav");)e=e.parentNode;if(qi(e,"data-nav")){var n=Se=Number(Fi(e,"data-nav")),i=tt||$?n*Q/Le:n*rt,a=le?n:Math.min(Math.ceil(i),Q-1);ri(a,t),He===n&&(Pe&&fi(),Se=-1)}},keydown:function(t){t=pi(t);var e=O.activeElement;if(!qi(e,"data-nav"))return;var n=[a.LEFT,a.RIGHT,a.ENTER,a.SPACE].indexOf(t.keyCode),i=Number(Fi(e,"data-nav"));0<=n&&(0===n?0<i&&vi(Ee[i-1]):1===n?i<Le-1&&vi(Ee[i+1]):ri(Se=i,t))}},ee={mouseover:function(){Pe&&(li(),ze=!0)},mouseout:function(){ze&&(ui(),ze=!1)}},ne={visibilitychange:function(){O.hidden?Pe&&(li(),qe=!0):qe&&(ui(),qe=!1)}},ie={keydown:function(t){t=pi(t);var e=[a.LEFT,a.RIGHT].indexOf(t.keyCode);0<=e&&oi(t,0===e?-1:1)}},ae={touchstart:xi,touchmove:bi,touchend:wi,touchcancel:wi},re={mousedown:xi,mousemove:bi,mouseup:wi,mouseleave:wi},oe=ln("controls"),ue=ln("nav"),le=!!$||H.navAsThumbnails,se=ln("autoplay"),ce=ln("touch"),fe=ln("mouseDrag"),de="tns-slide-active",ve="tns-slide-cloned",pe="tns-complete",he={load:function(t){kn(hi(t))},error:function(t){e=hi(t),zi(e,"failed"),Rn(e);var e}},me="force"===H.preventScrollOnTouch;if(oe)var ye,ge,xe=H.controlsContainer,be=H.controlsContainer?H.controlsContainer.outerHTML:"",we=H.prevButton,Ce=H.nextButton,Me=H.prevButton?H.prevButton.outerHTML:"",Te=H.nextButton?H.nextButton.outerHTML:"";if(ue)var Ee,Ae=H.navContainer,Ne=H.navContainer?H.navContainer.outerHTML:"",Le=$?Q:Mi(),Be=0,Se=-1,He=an(),Oe=He,De="tns-nav-active",ke="Carousel Page ",Re=" (Current Slide)";if(se)var Ie,Pe,ze,We,qe,Fe="forward"===H.autoplayDirection?1:-1,je=H.autoplayButton,Ve=H.autoplayButton?H.autoplayButton.outerHTML:"",Ge=["<span class='tns-visually-hidden'>"," animation</span>"];if(ce||fe)var Qe,Xe,Ye={},Ke={},Je=!1,Ue=F?function(t,e){return t.x-e.x}:function(t,e){return t.y-e.y};$||$e(Kt||_t),r&&(Ot=r,Dt="translate",o?(Dt+=F?"3d(":"3d(0px, ",kt=F?", 0px, 0px)":", 0px)"):(Dt+=F?"X(":"Y(",kt=")")),I&&(V.className=V.className.replace("tns-vpfix","")),function(){ln("gutter");T.className="tns-outer",j.className="tns-inner",T.id=Yt+"-ow",j.id=Yt+"-iw",""===V.id&&(V.id=Yt);Xt+=g||$?" tns-subpixel":" tns-no-subpixel",Xt+=y?" tns-calc":" tns-no-calc",$&&(Xt+=" tns-autowidth");Xt+=" tns-"+H.axis,V.className+=Xt,I?((M=O.createElement("div")).id=Yt+"-mw",M.className="tns-ovh",T.appendChild(M),M.appendChild(j)):T.appendChild(j);if(dt){var t=M||j;t.className+=" tns-ah"}if(E.insertBefore(T,V),j.appendChild(V),Ii(G,function(t,e){zi(t,"tns-item"),t.id||(t.id=Yt+"-item"+e),!I&&W&&zi(t,W),ji(t,{"aria-hidden":"true",tabindex:"-1"})}),Nt){for(var e=O.createDocumentFragment(),n=O.createDocumentFragment(),i=Nt;i--;){var a=i%Q,r=G[a].cloneNode(!0);if(zi(r,ve),Vi(r,"id"),n.insertBefore(r,n.firstChild),I){var o=G[Q-1-a].cloneNode(!0);zi(o,ve),Vi(o,"id"),e.appendChild(o)}}V.insertBefore(e,V.firstChild),V.appendChild(n),G=V.children}}(),function(){if(!I)for(var t=It,e=It+Math.min(Q,rt);t<e;t++){var n=G[t];n.style.left=100*(t-It)/rt+"%",zi(n,P),Wi(n,W)}F&&(g||$?(ki(Mt,"#"+Yt+" > .tns-item","font-size:"+m.getComputedStyle(G[0]).fontSize+";",Ri(Mt)),ki(Mt,"#"+Yt,"font-size:0;",Ri(Mt))):I&&Ii(G,function(t,e){var n;t.style.marginLeft=(n=e,y?y+"("+100*n+"% / "+Lt+")":100*n/Lt+"%")}));if(D){if(x){var i=M&&H.autoHeight?hn(H.speed):"";ki(Mt,"#"+Yt+"-mw",i,Ri(Mt))}i=cn(H.edgePadding,H.gutter,H.fixedWidth,H.speed,H.autoHeight),ki(Mt,"#"+Yt+"-iw",i,Ri(Mt)),I&&(i=F&&!$?"width:"+fn(H.fixedWidth,H.gutter,H.items)+";":"",x&&(i+=hn(st)),ki(Mt,"#"+Yt,i,Ri(Mt))),i=F&&!$?dn(H.fixedWidth,H.gutter,H.items):"",H.gutter&&(i+=vn(H.gutter)),I||(x&&(i+=hn(st)),b&&(i+=mn(st))),i&&ki(Mt,"#"+Yt+" > .tns-item",i,Ri(Mt))}else{I&&dt&&(M.style[x]=st/1e3+"s"),j.style.cssText=cn(et,nt,tt,dt),I&&F&&!$&&(V.style.width=fn(tt,nt,rt));var i=F&&!$?dn(tt,nt,rt):"";nt&&(i+=vn(nt)),i&&ki(Mt,"#"+Yt+" > .tns-item",i,Ri(Mt))}if(k&&D)for(var a in k){a=parseInt(a);var r=k[a],i="",o="",u="",l="",s="",c=$?null:sn("items",a),f=sn("fixedWidth",a),d=sn("speed",a),v=sn("edgePadding",a),p=sn("autoHeight",a),h=sn("gutter",a);x&&M&&sn("autoHeight",a)&&"speed"in r&&(o="#"+Yt+"-mw{"+hn(d)+"}"),("edgePadding"in r||"gutter"in r)&&(u="#"+Yt+"-iw{"+cn(v,h,f,d,p)+"}"),I&&F&&!$&&("fixedWidth"in r||"items"in r||tt&&"gutter"in r)&&(l="width:"+fn(f,h,c)+";"),x&&"speed"in r&&(l+=hn(d)),l&&(l="#"+Yt+"{"+l+"}"),("fixedWidth"in r||tt&&"gutter"in r||!I&&"items"in r)&&(s+=dn(f,h,c)),"gutter"in r&&(s+=vn(h)),!I&&"speed"in r&&(x&&(s+=hn(d)),b&&(s+=mn(d))),s&&(s="#"+Yt+" > .tns-item{"+s+"}"),(i=o+u+l+s)&&Mt.insertRule("@media (min-width: "+a/16+"em) {"+i+"}",Mt.cssRules.length)}}(),yn();var _e=ft?I?function(){var t=zt,e=Wt;t+=ot,e-=ot,et?(t+=1,e-=1):tt&&(it+nt)%(tt+nt)&&(e-=1),Nt&&(e<It?It-=Q:It<t&&(It+=Q))}:function(){if(Wt<It)for(;zt+Q<=It;)It-=Q;else if(It<zt)for(;It<=Wt-Q;)It+=Q}:function(){It=Math.max(zt,Math.min(Wt,It))},Ze=I?function(){var e,n,i,a,t,r,o,u,l,s,c;Jn(V,""),x||!st?(ti(),st&&Yi(V)||ai()):(e=V,n=Ot,i=Dt,a=kt,t=Zn(),r=st,o=ai,u=Math.min(r,10),l=0<=t.indexOf("%")?"%":"px",t=t.replace(l,""),s=Number(e.style[n].replace(i,"").replace(a,"").replace(l,"")),c=(t-s)/r*u,setTimeout(function t(){r-=u,s+=c,e.style[n]=i+s+l+a,0<r?setTimeout(t,u):o()},u)),F||Ci()}:function(){At=[];var t={};t[s]=t[c]=ai,_i(G[Pt],t),Ui(G[It],t),ei(Pt,P,z,!0),ei(It,W,P),s&&c&&st&&Yi(V)||ai()};return{version:"2.9.3",getInfo:Ei,events:Qt,goTo:ri,play:function(){gt&&!Pe&&(ci(),We=!1)},pause:function(){Pe&&(fi(),We=!0)},isOn:Y,updateSliderHeight:Fn,refresh:yn,destroy:function(){if(Mt.disabled=!0,Mt.ownerNode&&Mt.ownerNode.remove(),_i(m,{resize:Cn}),lt&&_i(O,ie),xe&&_i(xe,$t),Ae&&_i(Ae,te),_i(V,ee),_i(V,ne),je&&_i(je,{click:di}),gt&&clearInterval(Ie),I&&s){var t={};t[s]=ai,_i(V,t)}mt&&_i(V,ae),yt&&_i(V,re);var r=[A,be,Me,Te,Ne,Ve];for(var e in d.forEach(function(t,e){var n="container"===t?T:H[t];if("object"==typeof n&&n){var i=!!n.previousElementSibling&&n.previousElementSibling,a=n.parentNode;n.outerHTML=r[e],H[t]=i?i.nextElementSibling:a.firstElementChild}}),d=P=z=C=W=F=T=j=V=E=A=G=Q=q=X=$=tt=et=nt=it=rt=ot=ut=lt=st=ct=ft=dt=Mt=Tt=N=At=Nt=Lt=Bt=St=Ht=Ot=Dt=kt=Rt=It=Pt=zt=Wt=Ft=jt=Vt=Gt=Qt=Xt=Yt=Kt=Jt=Ut=_t=Zt=$t=te=ee=ne=ie=ae=re=oe=ue=le=se=ce=fe=de=pe=he=L=vt=pt=xe=be=we=Ce=ye=ge=ht=Ae=Ne=Ee=Le=Be=Se=He=Oe=De=ke=Re=gt=xt=Fe=bt=wt=je=Ve=Ct=Ge=Ie=Pe=ze=We=qe=Ye=Ke=Qe=Je=Xe=Ue=mt=yt=null,this)"rebuild"!==e&&(this[e]=null);Y=!1},rebuild:function(){return $i(Li(H,v))}}}function $e(t){t&&(vt=ht=mt=yt=lt=gt=wt=Ct=!1)}function tn(){for(var t=I?It-Nt:It;t<0;)t+=Q;return t%Q+1}function en(t){return t=t?Math.max(0,Math.min(ft?Q-1:Q-rt,t)):0,I?t+Nt:t}function nn(t){for(null==t&&(t=It),I&&(t-=Nt);t<0;)t+=Q;return Math.floor(t%Q)}function an(){var t,e=nn();return t=le?e:tt||$?Math.ceil((e+1)*Le/Q-1):Math.floor(e/rt),!ft&&I&&It===Wt&&(t=Le-1),t}function rn(){return m.innerWidth||O.documentElement.clientWidth||O.body.clientWidth}function on(t){return"top"===t?"afterbegin":"beforeend"}function un(){var t=et?2*et-nt:0;return function t(e){if(null!=e){var n,i,a=O.createElement("div");return e.appendChild(a),i=(n=a.getBoundingClientRect()).right-n.left,a.remove(),i||t(e.parentNode)}}(E)-t}function ln(t){if(H[t])return!0;if(k)for(var e in k)if(k[e][t])return!0;return!1}function sn(t,e){if(null==e&&(e=X),"items"===t&&tt)return Math.floor((it+nt)/(tt+nt))||1;var n=H[t];if(k)for(var i in k)e>=parseInt(i)&&t in k[i]&&(n=k[i][t]);return"slideBy"===t&&"page"===n&&(n=sn("items")),I||"slideBy"!==t&&"items"!==t||(n=Math.floor(n)),n}function cn(t,e,n,i,a){var r="";if(void 0!==t){var o=t;e&&(o-=e),r=F?"margin: 0 "+o+"px 0 "+t+"px;":"margin: "+t+"px 0 "+o+"px 0;"}else if(e&&!n){var u="-"+e+"px";r="margin: 0 "+(F?u+" 0 0":"0 "+u+" 0")+";"}return!I&&a&&x&&i&&(r+=hn(i)),r}function fn(t,e,n){return t?(t+e)*Lt+"px":y?y+"("+100*Lt+"% / "+n+")":100*Lt/n+"%"}function dn(t,e,n){var i;if(t)i=t+e+"px";else{I||(n=Math.floor(n));var a=I?Lt:n;i=y?y+"(100% / "+a+")":100/a+"%"}return i="width:"+i,"inner"!==R?i+";":i+" !important;"}function vn(t){var e="";!1!==t&&(e=(F?"padding-":"margin-")+(F?"right":"bottom")+": "+t+"px;");return e}function pn(t,e){var n=t.substring(0,t.length-e).toLowerCase();return n&&(n="-"+n+"-"),n}function hn(t){return pn(x,18)+"transition-duration:"+t/1e3+"s;"}function mn(t){return pn(b,17)+"animation-duration:"+t/1e3+"s;"}function yn(){if(ln("autoHeight")||$||!F){var t=V.querySelectorAll("img");Ii(t,function(t){var e=t.src;Tt||(e&&e.indexOf("data:image")<0?(t.src="",Ui(t,he),zi(t,"loading"),t.src=e):kn(t))}),Ai(function(){zn(Gi(t),function(){L=!0})}),ln("autoHeight")&&(t=In(It,Math.min(It+rt-1,Lt-1))),Tt?gn():Ai(function(){zn(Gi(t),gn)})}else I&&$n(),bn(),wn()}function gn(){if($&&1<Q){var i=ft?It:Q-1;!function t(){var e=G[i].getBoundingClientRect().left,n=G[i-1].getBoundingClientRect().right;Math.abs(e-n)<=1?xn():setTimeout(function(){t()},16)}()}else xn()}function xn(){F&&!$||(jn(),$?(St=_n(),Ut&&(_t=Tn()),Wt=Rt(),$e(Kt||_t)):Ci()),I&&$n(),bn(),wn()}function bn(){if(Vn(),T.insertAdjacentHTML("afterbegin",'<div class="tns-liveregion tns-visually-hidden" aria-live="polite" aria-atomic="true">slide <span class="current">'+Hn()+"</span>  of "+Q+"</div>"),B=T.querySelector(".tns-liveregion .current"),se){var t=gt?"stop":"start";je?ji(je,{"data-action":t}):H.autoplayButtonOutput&&(T.insertAdjacentHTML(on(H.autoplayPosition),'<button type="button" data-action="'+t+'">'+Ge[0]+t+Ge[1]+bt[0]+"</button>"),je=T.querySelector("[data-action]")),je&&Ui(je,{click:di}),gt&&(ci(),wt&&Ui(V,ee),Ct&&Ui(V,ne))}if(ue){if(Ae)ji(Ae,{"aria-label":"Carousel Pagination"}),Ii(Ee=Ae.children,function(t,e){ji(t,{"data-nav":e,tabindex:"-1","aria-label":ke+(e+1),"aria-controls":Yt})});else{for(var e="",n=le?"":'style="display:none"',i=0;i<Q;i++)e+='<button type="button" data-nav="'+i+'" tabindex="-1" aria-controls="'+Yt+'" '+n+' aria-label="'+ke+(i+1)+'"></button>';e='<div class="tns-nav" aria-label="Carousel Pagination">'+e+"</div>",T.insertAdjacentHTML(on(H.navPosition),e),Ae=T.querySelector(".tns-nav"),Ee=Ae.children}if(Ti(),x){var a=x.substring(0,x.length-18).toLowerCase(),r="transition: all "+st/1e3+"s";a&&(r="-"+a+"-"+r),ki(Mt,"[aria-controls^="+Yt+"-item]",r,Ri(Mt))}ji(Ee[He],{"aria-label":ke+(He+1)+Re}),Vi(Ee[He],"tabindex"),zi(Ee[He],De),Ui(Ae,te)}oe&&(xe||we&&Ce||(T.insertAdjacentHTML(on(H.controlsPosition),'<div class="tns-controls" aria-label="Carousel Navigation" tabindex="0"><button type="button" data-controls="prev" tabindex="-1" aria-controls="'+Yt+'">'+pt[0]+'</button><button type="button" data-controls="next" tabindex="-1" aria-controls="'+Yt+'">'+pt[1]+"</button></div>"),xe=T.querySelector(".tns-controls")),we&&Ce||(we=xe.children[0],Ce=xe.children[1]),H.controlsContainer&&ji(xe,{"aria-label":"Carousel Navigation",tabindex:"0"}),(H.controlsContainer||H.prevButton&&H.nextButton)&&ji([we,Ce],{"aria-controls":Yt,tabindex:"-1"}),(H.controlsContainer||H.prevButton&&H.nextButton)&&(ji(we,{"data-controls":"prev"}),ji(Ce,{"data-controls":"next"})),ye=Qn(we),ge=Qn(Ce),Kn(),xe?Ui(xe,$t):(Ui(we,$t),Ui(Ce,$t))),An()}function wn(){if(I&&s){var t={};t[s]=ai,Ui(V,t)}mt&&Ui(V,ae,H.preventScrollOnTouch),yt&&Ui(V,re),lt&&Ui(O,ie),"inner"===R?Qt.on("outerResized",function(){Mn(),Qt.emit("innerLoaded",Ei())}):(k||tt||$||dt||!F)&&Ui(m,{resize:Cn}),dt&&("outer"===R?Qt.on("innerLoaded",Pn):Kt||Pn()),Dn(),Kt?Bn():_t&&Ln(),Qt.on("indexChanged",Wn),"inner"===R&&Qt.emit("innerLoaded",Ei()),"function"==typeof Gt&&Gt(Ei()),Y=!0}function Cn(t){Ai(function(){Mn(pi(t))})}function Mn(t){if(Y){"outer"===R&&Qt.emit("outerResized",Ei(t)),X=rn();var e,n=q,i=!1;k&&(En(),(e=n!==q)&&Qt.emit("newBreakpointStart",Ei(t)));var a,r,o,u,l=rt,s=Kt,c=_t,f=lt,d=vt,v=ht,p=mt,h=yt,m=gt,y=wt,g=Ct,x=It;if(e){var b=tt,w=dt,C=pt,M=at,T=bt;if(!D)var E=nt,A=et}if(lt=sn("arrowKeys"),vt=sn("controls"),ht=sn("nav"),mt=sn("touch"),at=sn("center"),yt=sn("mouseDrag"),gt=sn("autoplay"),wt=sn("autoplayHoverPause"),Ct=sn("autoplayResetOnVisibility"),e&&(Kt=sn("disable"),tt=sn("fixedWidth"),st=sn("speed"),dt=sn("autoHeight"),pt=sn("controlsText"),bt=sn("autoplayText"),xt=sn("autoplayTimeout"),D||(et=sn("edgePadding"),nt=sn("gutter"))),$e(Kt),it=un(),F&&!$||Kt||(jn(),F||(Ci(),i=!0)),(tt||$)&&(St=_n(),Wt=Rt()),(e||tt)&&(rt=sn("items"),ot=sn("slideBy"),(r=rt!==l)&&(tt||$||(Wt=Rt()),_e())),e&&Kt!==s&&(Kt?Bn():function(){if(!Jt)return;if(Mt.disabled=!1,V.className+=Xt,$n(),ft)for(var t=Nt;t--;)I&&Xi(G[t]),Xi(G[Lt-t-1]);if(!I)for(var e=It,n=It+Q;e<n;e++){var i=G[e],a=e<It+rt?P:W;i.style.left=100*(e-It)/rt+"%",zi(i,a)}Nn(),Jt=!1}()),Ut&&(e||tt||$)&&(_t=Tn())!==c&&(_t?(ti(Zn(en(0))),Ln()):(!function(){if(!Zt)return;et&&D&&(j.style.margin="");if(Nt)for(var t="tns-transparent",e=Nt;e--;)I&&Wi(G[e],t),Wi(G[Lt-e-1],t);Nn(),Zt=!1}(),i=!0)),$e(Kt||_t),gt||(wt=Ct=!1),lt!==f&&(lt?Ui(O,ie):_i(O,ie)),vt!==d&&(vt?xe?Xi(xe):(we&&Xi(we),Ce&&Xi(Ce)):xe?Qi(xe):(we&&Qi(we),Ce&&Qi(Ce))),ht!==v&&(ht?(Xi(Ae),Ti()):Qi(Ae)),mt!==p&&(mt?Ui(V,ae,H.preventScrollOnTouch):_i(V,ae)),yt!==h&&(yt?Ui(V,re):_i(V,re)),gt!==m&&(gt?(je&&Xi(je),Pe||We||ci()):(je&&Qi(je),Pe&&fi())),wt!==y&&(wt?Ui(V,ee):_i(V,ee)),Ct!==g&&(Ct?Ui(O,ne):_i(O,ne)),e){if(tt===b&&at===M||(i=!0),dt!==w&&(dt||(j.style.height="")),vt&&pt!==C&&(we.innerHTML=pt[0],Ce.innerHTML=pt[1]),je&&bt!==T){var N=gt?1:0,L=je.innerHTML,B=L.length-T[N].length;L.substring(B)===T[N]&&(je.innerHTML=L.substring(0,B)+bt[N])}}else at&&(tt||$)&&(i=!0);if((r||tt&&!$)&&(Le=Mi(),Ti()),(a=It!==x)?(Qt.emit("indexChanged",Ei()),i=!0):r?a||Wn():(tt||$)&&(Dn(),Vn(),Sn()),r&&!I&&function(){for(var t=It+Math.min(Q,rt),e=Lt;e--;){var n=G[e];It<=e&&e<t?(zi(n,"tns-moving"),n.style.left=100*(e-It)/rt+"%",zi(n,P),Wi(n,W)):n.style.left&&(n.style.left="",zi(n,W),Wi(n,P)),Wi(n,z)}setTimeout(function(){Ii(G,function(t){Wi(t,"tns-moving")})},300)}(),!Kt&&!_t){if(e&&!D&&(et===A&&nt===E||(j.style.cssText=cn(et,nt,tt,st,dt)),F)){I&&(V.style.width=fn(tt,nt,rt));var S=dn(tt,nt,rt)+vn(nt);u=Ri(o=Mt)-1,"deleteRule"in o?o.deleteRule(u):o.removeRule(u),ki(Mt,"#"+Yt+" > .tns-item",S,Ri(Mt))}dt&&Pn(),i&&($n(),Pt=It)}e&&Qt.emit("newBreakpointEnd",Ei(t))}}function Tn(){if(!tt&&!$)return Q<=(at?rt-(rt-1)/2:rt);var t=tt?(tt+nt)*Q:N[Q],e=et?it+2*et:it+nt;return at&&(e-=tt?(it-tt)/2:(it-(N[It+1]-N[It]-nt))/2),t<=e}function En(){for(var t in q=0,k)(t=parseInt(t))<=X&&(q=t)}function An(){!gt&&je&&Qi(je),!ht&&Ae&&Qi(Ae),vt||(xe?Qi(xe):(we&&Qi(we),Ce&&Qi(Ce)))}function Nn(){gt&&je&&Xi(je),ht&&Ae&&Xi(Ae),vt&&(xe?Xi(xe):(we&&Xi(we),Ce&&Xi(Ce)))}function Ln(){if(!Zt){if(et&&(j.style.margin="0px"),Nt)for(var t="tns-transparent",e=Nt;e--;)I&&zi(G[e],t),zi(G[Lt-e-1],t);An(),Zt=!0}}function Bn(){if(!Jt){if(Mt.disabled=!0,V.className=V.className.replace(Xt.substring(1),""),Vi(V,["style"]),ft)for(var t=Nt;t--;)I&&Qi(G[t]),Qi(G[Lt-t-1]);if(F&&I||Vi(j,["style"]),!I)for(var e=It,n=It+Q;e<n;e++){var i=G[e];Vi(i,["style"]),Wi(i,P),Wi(i,W)}An(),Jt=!0}}function Sn(){var t=Hn();B.innerHTML!==t&&(B.innerHTML=t)}function Hn(){var t=On(),e=t[0]+1,n=t[1]+1;return e===n?e+"":e+" to "+n}function On(t){null==t&&(t=Zn());var n,i,a,r=It;if(at||et?($||tt)&&(i=-(parseFloat(t)+et),a=i+it+2*et):$&&(i=N[It],a=i+it),$)N.forEach(function(t,e){e<Lt&&((at||et)&&t<=i+.5&&(r=e),.5<=a-t&&(n=e))});else{if(tt){var e=tt+nt;at||et?(r=Math.floor(i/e),n=Math.ceil(a/e-1)):n=r+Math.ceil(it/e)-1}else if(at||et){var o=rt-1;if(at?(r-=o/2,n=It+o/2):n=It+o,et){var u=et*rt/it;r-=u,n+=u}r=Math.floor(r),n=Math.ceil(n)}else n=r+rt-1;r=Math.max(r,0),n=Math.min(n,Lt-1)}return[r,n]}function Dn(){if(Tt&&!Kt){var t=On();t.push(Et),In.apply(null,t).forEach(function(t){if(!Pi(t,pe)){var e={};e[s]=function(t){t.stopPropagation()},Ui(t,e),Ui(t,he),t.src=Fi(t,"data-src");var n=Fi(t,"data-srcset");n&&(t.srcset=n),zi(t,"loading")}})}}function kn(t){zi(t,"loaded"),Rn(t)}function Rn(t){zi(t,pe),Wi(t,"loading"),_i(t,he)}function In(t,e,n){var i=[];for(n||(n="img");t<=e;)Ii(G[t].querySelectorAll(n),function(t){i.push(t)}),t++;return i}function Pn(){var t=In.apply(null,On());Ai(function(){zn(t,Fn)})}function zn(n,t){return L?t():(n.forEach(function(t,e){!Tt&&t.complete&&Rn(t),Pi(t,pe)&&n.splice(e,1)}),n.length?void Ai(function(){zn(n,t)}):t())}function Wn(){Dn(),Vn(),Sn(),Kn(),function(){if(ht&&(He=0<=Se?Se:an(),Se=-1,He!==Oe)){var t=Ee[Oe],e=Ee[He];ji(t,{tabindex:"-1","aria-label":ke+(Oe+1)}),Wi(t,De),ji(e,{"aria-label":ke+(He+1)+Re}),Vi(e,"tabindex"),zi(e,De),Oe=He}}()}function qn(t,e){for(var n=[],i=t,a=Math.min(t+e,Lt);i<a;i++)n.push(G[i].offsetHeight);return Math.max.apply(null,n)}function Fn(){var t=dt?qn(It,rt):qn(Nt,Q),e=M||j;e.style.height!==t&&(e.style.height=t+"px")}function jn(){N=[0];var n=F?"left":"top",i=F?"right":"bottom",a=G[0].getBoundingClientRect()[n];Ii(G,function(t,e){e&&N.push(t.getBoundingClientRect()[n]-a),e===Lt-1&&N.push(t.getBoundingClientRect()[i]-a)})}function Vn(){var t=On(),n=t[0],i=t[1];Ii(G,function(t,e){n<=e&&e<=i?qi(t,"aria-hidden")&&(Vi(t,["aria-hidden","tabindex"]),zi(t,de)):qi(t,"aria-hidden")||(ji(t,{"aria-hidden":"true",tabindex:"-1"}),Wi(t,de))})}function Gn(t){return t.nodeName.toLowerCase()}function Qn(t){return"button"===Gn(t)}function Xn(t){return"true"===t.getAttribute("aria-disabled")}function Yn(t,e,n){t?e.disabled=n:e.setAttribute("aria-disabled",n.toString())}function Kn(){if(vt&&!ct&&!ft){var t=ye?we.disabled:Xn(we),e=ge?Ce.disabled:Xn(Ce),n=It<=zt,i=!ct&&Wt<=It;n&&!t&&Yn(ye,we,!0),!n&&t&&Yn(ye,we,!1),i&&!e&&Yn(ge,Ce,!0),!i&&e&&Yn(ge,Ce,!1)}}function Jn(t,e){x&&(t.style[x]=e)}function Un(t){return null==t&&(t=It),$?(it-(et?nt:0)-(N[t+1]-N[t]-nt))/2:tt?(it-tt)/2:(rt-1)/2}function _n(){var t=it+(et?nt:0)-(tt?(tt+nt)*Lt:N[Lt]);return at&&!ft&&(t=tt?-(tt+nt)*(Lt-1)-Un():Un(Lt-1)-N[Lt-1]),0<t&&(t=0),t}function Zn(t){var e;if(null==t&&(t=It),F&&!$)if(tt)e=-(tt+nt)*t,at&&(e+=Un());else{var n=r?Lt:rt;at&&(t-=Un()),e=100*-t/n}else e=-N[t],at&&$&&(e+=Un());return Bt&&(e=Math.max(e,St)),e+=!F||$||tt?"px":"%"}function $n(t){Jn(V,"0s"),ti(t)}function ti(t){null==t&&(t=Zn()),V.style[Ot]=Dt+t+kt}function ei(t,e,n,i){var a=t+rt;ft||(a=Math.min(a,Lt));for(var r=t;r<a;r++){var o=G[r];i||(o.style.left=100*(r-It)/rt+"%"),C&&u&&(o.style[u]=o.style[l]=C*(r-t)/1e3+"s"),Wi(o,e),zi(o,n),i&&At.push(o)}}function ni(t,e){Ht&&_e(),(It!==Pt||e)&&(Qt.emit("indexChanged",Ei()),Qt.emit("transitionStart",Ei()),dt&&Pn(),Pe&&t&&0<=["click","keydown"].indexOf(t.type)&&fi(),Vt=!0,Ze())}function ii(t){return t.toLowerCase().replace(/-/g,"")}function ai(t){if(I||Vt){if(Qt.emit("transitionEnd",Ei(t)),!I&&0<At.length)for(var e=0;e<At.length;e++){var n=At[e];n.style.left="",l&&u&&(n.style[l]="",n.style[u]=""),Wi(n,z),zi(n,W)}if(!t||!I&&t.target.parentNode===V||t.target===V&&ii(t.propertyName)===ii(Ot)){if(!Ht){var i=It;_e(),It!==i&&(Qt.emit("indexChanged",Ei()),$n())}"inner"===R&&Qt.emit("innerLoaded",Ei()),Vt=!1,Pt=It}}}function ri(t,e){if(!_t)if("prev"===t)oi(e,-1);else if("next"===t)oi(e,1);else{if(Vt){if(qt)return;ai()}var n=nn(),i=0;if("first"===t?i=-n:"last"===t?i=I?Q-rt-n:Q-1-n:("number"!=typeof t&&(t=parseInt(t)),isNaN(t)||(e||(t=Math.max(0,Math.min(Q-1,t))),i=t-n)),!I&&i&&Math.abs(i)<rt){var a=0<i?1:-1;i+=zt<=It+i-Q?Q*a:2*Q*a*-1}It+=i,I&&ft&&(It<zt&&(It+=Q),Wt<It&&(It-=Q)),nn(It)!==nn(Pt)&&ni(e)}}function oi(t,e){if(Vt){if(qt)return;ai()}var n;if(!e){for(var i=hi(t=pi(t));i!==xe&&[we,Ce].indexOf(i)<0;)i=i.parentNode;var a=[we,Ce].indexOf(i);0<=a&&(n=!0,e=0===a?-1:1)}if(ct){if(It===zt&&-1===e)return void ri("last",t);if(It===Wt&&1===e)return void ri("first",t)}e&&(It+=ot*e,$&&(It=Math.floor(It)),ni(n||t&&"keydown"===t.type?t:null))}function ui(){Ie=setInterval(function(){oi(null,Fe)},xt),Pe=!0}function li(){clearInterval(Ie),Pe=!1}function si(t,e){ji(je,{"data-action":t}),je.innerHTML=Ge[0]+t+Ge[1]+e}function ci(){ui(),je&&si("stop",bt[1])}function fi(){li(),je&&si("start",bt[0])}function di(){Pe?(fi(),We=!0):(ci(),We=!1)}function vi(t){t.focus()}function pi(t){return mi(t=t||m.event)?t.changedTouches[0]:t}function hi(t){return t.target||m.event.srcElement}function mi(t){return 0<=t.type.indexOf("touch")}function yi(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function gi(){return a=Ke.y-Ye.y,r=Ke.x-Ye.x,t=Math.atan2(a,r)*(180/Math.PI),e=Ft,n=!1,i=Math.abs(90-Math.abs(t)),90-e<=i?n="horizontal":i<=e&&(n="vertical"),n===H.axis;var t,e,n,i,a,r}function xi(t){if(Vt){if(qt)return;ai()}gt&&Pe&&li(),Je=!0,Xe&&(Ni(Xe),Xe=null);var e=pi(t);Qt.emit(mi(t)?"touchStart":"dragStart",Ei(t)),!mi(t)&&0<=["img","a"].indexOf(Gn(hi(t)))&&yi(t),Ke.x=Ye.x=e.clientX,Ke.y=Ye.y=e.clientY,I&&(Qe=parseFloat(V.style[Ot].replace(Dt,"")),Jn(V,"0s"))}function bi(t){if(Je){var e=pi(t);Ke.x=e.clientX,Ke.y=e.clientY,I?Xe||(Xe=Ai(function(){!function t(e){if(!jt)return void(Je=!1);Ni(Xe);Je&&(Xe=Ai(function(){t(e)}));"?"===jt&&(jt=gi());if(jt){!me&&mi(e)&&(me=!0);try{e.type&&Qt.emit(mi(e)?"touchMove":"dragMove",Ei(e))}catch(t){}var n=Qe,i=Ue(Ke,Ye);if(!F||tt||$)n+=i,n+="px";else{var a=r?i*rt*100/((it+nt)*Lt):100*i/(it+nt);n+=a,n+="%"}V.style[Ot]=Dt+n+kt}}(t)})):("?"===jt&&(jt=gi()),jt&&(me=!0)),("boolean"!=typeof t.cancelable||t.cancelable)&&me&&t.preventDefault()}}function wi(i){if(Je){Xe&&(Ni(Xe),Xe=null),I&&Jn(V,""),Je=!1;var t=pi(i);Ke.x=t.clientX,Ke.y=t.clientY;var a=Ue(Ke,Ye);if(Math.abs(a)){if(!mi(i)){var n=hi(i);Ui(n,{click:function t(e){yi(e),_i(n,{click:t})}})}I?Xe=Ai(function(){if(F&&!$){var t=-a*rt/(it+nt);t=0<a?Math.floor(t):Math.ceil(t),It+=t}else{var e=-(Qe+a);if(e<=0)It=zt;else if(e>=N[Lt-1])It=Wt;else for(var n=0;n<Lt&&e>=N[n];)e>N[It=n]&&a<0&&(It+=1),n++}ni(i,a),Qt.emit(mi(i)?"touchEnd":"dragEnd",Ei(i))}):jt&&oi(i,0<a?-1:1)}}"auto"===H.preventScrollOnTouch&&(me=!1),Ft&&(jt="?"),gt&&!Pe&&ui()}function Ci(){(M||j).style.height=N[It+rt]-N[It]+"px"}function Mi(){var t=tt?(tt+nt)*Q/it:Q/rt;return Math.min(Math.ceil(t),Q)}function Ti(){if(ht&&!le&&Le!==Be){var t=Be,e=Le,n=Xi;for(Le<Be&&(t=Le,e=Be,n=Qi);t<e;)n(Ee[t]),t++;Be=Le}}function Ei(t){return{container:V,slideItems:G,navContainer:Ae,navItems:Ee,controlsContainer:xe,hasControls:oe,prevButton:we,nextButton:Ce,items:rt,slideBy:ot,cloneCount:Nt,slideCount:Q,slideCountNew:Lt,index:It,indexCached:Pt,displayIndex:tn(),navCurrentIndex:He,navCurrentIndexCached:Oe,pages:Le,pagesCached:Be,sheet:Mt,isOn:Y,event:t||{}}}f&&console.warn("No slides found in",H.container)};return $i}();
$(".ps-link-in").click(function(){return document.location=$(this).data("link"),!1}),$(".ps-link-out").click(function(){return window.open($(this).data("link")),!1});
$(".avatar").click(function() { $(this).toggleClass('active'); $('.profile-box').toggle(); }); $(document).on('click', function(e) { if (!$(e.target).closest(".miniprofile").length) { $('.profile-box').hide(); $(".avatar").removeClass('active'); } e.stopPropagation(); });
$(".sort-hide span").click(function() { $('#news_set_sort').toggle(); }); $(document).on('click', function(e) { if (!$(e.target).closest(".catheadblock").length) { $('#news_set_sort').hide(); } e.stopPropagation(); });
$(document).on('click', '.favmod', function(e) { e.preventDefault(); var $this = $(this); ShowLoading(''); $.ajax({ url: dle_root + 'engine/mods/favorites/ajax.php', type: 'POST', dataType: 'json', data: {newsid: $this.data('id')}, }).done(function() { $this.toggleClass('active'); if ($this.hasClass('active')) { var thisfavgame = $('<div>').addClass('thisfavgame'); var thisfavgameLink = $('<a>').attr('href', '/favorites/').text('В избранном'); thisfavgame.append(thisfavgameLink); $('.poster-imgbox').append(thisfavgame); } else { $('.thisfavgame').remove(); } }).fail(function(error) { DLEalert(error.responseText, dle_info); }).always(function() { HideLoading(); }); });
$(function(){$('.open-scr').click(function(){$('.scrblock-hide').toggleClass('expand');$(".open-scr").remove();});});
$('#comments').click(function(){ $('.add-commform').addClass('active_comment'); $(this).attr('placeholder', 'Если в планах задать вопрос, читаем FAQ ...'); }).on('input', function () { $('.add-commform').addClass('nofaq'); this.style.height = 'auto'; this.style.height = (this.scrollHeight) + 'px'; });
document.addEventListener("DOMContentLoaded",()=>{const textarea=document.getElementById("comments");if(textarea){const counter=document.createElement("div");counter.id="counter";counter.style.display="none";textarea.parentNode.appendChild(counter);const updateCounterAndMessage=()=>{const length=textarea.value.length;let text=`${length}`;const checkRange=(min,max,message)=>{return(length>=min&&length<=max)?message:null};text=checkRange(140,150,"Супер, коммент 👍")||checkRange(200,210,"Отличный объём 💪")||checkRange(280,290,"🚀 Избранный коммент")||text;counter.innerHTML=text;if(length>0){counter.style.display="block";}else{counter.style.display="none";}};textarea.addEventListener("input",updateCounterAndMessage);}});
$("body").on("click",".notreg",function(){return DLEalert("<ul class='confirm1'><li>Скачивайте последние версии игр первыми</li><li>Получите доступ к закрытым возможностям</li><li>Комментируйте без проверки и ограничений</li></ul><div class='confirm2'><a class='cfreg' href='/index.php?do=register'>Регистрация</a><div class='head-addcomm'><span class='head-addcomm-title'>или вход через</span><a class='socbutton vk' href='/auth.html' target='_blank'><i class='fab fa-vk'></i></a><a class='socbutton ggl' href='/auth.html' target='_blank'><i class='fab fa-google'></i></a><a class='socbutton ya' href='/auth.html' target='_blank'><i class='fab fa-yandex'></i></a></div></div>","Войдите на сайт"),!1});
const hide = () => { const el = document.querySelector('.tracker_notice'); if (el) el.style.display = 'none'; }, isValid = () => localStorage.getItem('blconfirmed') && Date.now() < Number(localStorage.getItem('blconfirmed_expiration')); const closeBtn = document.querySelector('.tracker_notice .close'); isValid() ? hide() : (closeBtn && closeBtn.addEventListener('click', () => { localStorage.setItem('blconfirmed', 'yes'); localStorage.setItem('blconfirmed_expiration', (Date.now() + 10 * 24 * 60 * 60 * 1000).toString()); hide(); }));
const marquee = document.querySelector('#marquee'); marquee.onmouseover = () => marquee.style.animationPlayState = "paused", marquee.onmouseout = () => marquee.style.animationPlayState = "running";

$(document).ready(function() {
    const body = $('body');
    const nightModeInput = $("input#night-mode");
    const toggleTheme = (isDark) => {
        if (isDark) {
            body.addClass('dark');
            localStorage.setItem('theme-dark', 'true');
            nightModeInput.prop("checked", true);
        } else {
            body.removeClass('dark');
            localStorage.removeItem('theme-dark');
            nightModeInput.prop("checked", false);
        }
    };
    // Инициализация начального состояния
    const initialTheme = localStorage.getItem('theme-dark') === 'true';
    toggleTheme(initialTheme);
    body.removeClass('hide');
    // Функция смены темы
    window.changeTheme = () => {
        const isDark = !body.hasClass('dark');
        toggleTheme(isDark);
    };
});

$(".catfaq-item__head").on("click", function() {
    $(this).toggleClass("active").next().toggle();
});

// переход и подсветка блока
$('a[href^="#"]').on('click', function(e) {
    const target = $($(this).attr('href'));
    if (!target.length) return;
    e.preventDefault();
    $('html, body').animate({scrollTop: target.offset().top - 80}, 1000);
    target.addClass('highlighted').delay(1500).queue(function() {
        $(this).removeClass('highlighted').dequeue();
    });
});

// Подсветка комментария после дефолтного перехода
$(function() {
    var hash = window.location.hash;
    var match = hash.match(/#findcomment(\d+)/);
    if (match) {
        var commentSelector = "#comm-id-" + match[1];
        $(commentSelector).css('background-color', '#ffe7a8');
        setTimeout(function() {
            $(commentSelector).css('background-color', '');
        }, 2000);
    }
});

// ротация комментариев с Local Storage
let currentComment=0,$rcomm=$('.rcomm'),$commright=$('.commright'),getCommentOffset=index=>$rcomm.slice(0,index).toArray().reduce((offset,el)=>offset+$(el).outerHeight(true),0),setContainerHeight=()=>$commright.height($rcomm.slice(currentComment,currentComment+5).toArray().reduce((totalHeight,el)=>totalHeight+$(el).outerHeight(true),0)),scrollComments=()=>{currentComment=currentComment>$rcomm.length-5?0:currentComment+1;setContainerHeight();$commright.animate({scrollTop:getCommentOffset(currentComment)},1500);};setContainerHeight();let intervalId=null,startScrolling=()=>{if(intervalId===null){scrollComments();intervalId=setTimeout(()=>{intervalId=null;requestAnimationFrame(startScrolling);},3500);}},stopScrollingTime=localStorage.getItem('stopScrollingTime');if(!stopScrollingTime||Date.now()-stopScrollingTime>48*60*60*1000){startScrolling();}$commright.hover(()=>{clearTimeout(intervalId);localStorage.setItem('stopScrollingTime',Date.now());});

// запоминаем блок меток
$(function() {
    const list1 = $('.lmenu-list');
    const list2 = $('.lmenu-list2');

    const setState = state => {
        localStorage.setItem('listState', state);
        localStorage.setItem('listStateExpires', Date.now() + 4 * 60 * 60 * 1000);
    };

    // Получаем сохраненное состояние из localStorage
    localStorage.getItem('listState') === 'list2' ? list1.hide() : list1.show();
    localStorage.getItem('listState') === 'list2' ? list2.show() : list2.hide();

    $('.open_alltag.genres').click(() => {
        list1.toggle();
        list2.toggle();
        // Сохраняем текущее состояние в localStorage на 4 часа
        list1.is(':visible') ? setState('list1') : setState('list2');
        $('html, body').animate({scrollTop: $('nav.block-right.menu').offset().top - 8}, 500);
    });

    // Проверяем, истекло ли время действия состояния
    if (localStorage.getItem('listStateExpires') && Date.now() > localStorage.getItem('listStateExpires')) {
        localStorage.removeItem('listState');
        localStorage.removeItem('listStateExpires');
    }
});

var tnsSlider1, tnsSlider2, tnsSlider3;

var $tnsCarousel1 = $('.head-carusel');
$tnsCarousel1.each(function() {
    tnsSlider1 = tns({
        container: this,
        controls: false,
        items: 5,
        gutter: 16,
        speed: 500,
        slideBy: 'page',
        loop: false,
        navPosition: 'bottom',
        responsive: {
            0: {items: 1,},
            320: {items: 2,},
            438: {items: 3,},
            630: {items: 4,},
            760: {items: 5,},
            961: {items: 4,},
            1100: {items: 5,}
        }
    });
});

var $tnsCarousel2 = $('.head-carusel2');
$tnsCarousel2.each(function() {
    tnsSlider2 = tns({
        container: this,
        controls: false,
        items: 7,
        gutter: 17,
        speed: 500,
        slideBy: 'page',
        loop: false,
        navPosition: 'bottom',
        responsive: {
            0: {items: 2,},
            460: {items: 3,},
            615: {items: 4,},
            768: {items: 5,},
            992: {items: 6,},
            1200: {items: 7,}
        }
    });
});

var $tnsCarousel3 = $('.fixnews');
$tnsCarousel3.each(function() {
    tnsSlider3 = tns({
        container: this,
        controls: false,
        items: 4,
        gutter: 17,
        speed: 500,
        slideBy: 'page',
        loop: false,
        responsive: {
            0: {items: 2,},
            438: {items: 3,},
            691: {items: 4,}
        }
    });
});

$('.button_showrelgame').on('click', function() {
    const $this = $(this);
    const $relgame = $('#relgame');

    if ($this.hasClass('active')) {
        if (tnsSlider1) {
            tnsSlider1 = tnsSlider1.rebuild();
        }
        $relgame.find('.related_game')
                .removeClass('related_game')
                .addClass('head-carusel');
    } else {
        if (tnsSlider1) {
            tnsSlider1.destroy();
        }
        $relgame.find('.head-carusel')
                .removeClass('head-carusel')
                .addClass('related_game');
    }

    $this.toggleClass('active');
});


$(".rate-label").each(function(){var a = parseFloat($(this).text(), 5).toFixed(0); $(this).addClass('rate-'+a) });
$('.steaminf').click(function() { $(".steamreviews").slideToggle('slow'); });
$('.button_showtag').click(function() { $('.apptag_ctn').toggleClass("active");return false;});
$(".apptag, .cat").each(function(){ if ($(this).hasClass('apptag')) { var text = $(this).html(); text = text.replace(/,/g, ''); $(this).html(text); } else if ($(this).hasClass('cat')) { $(this).contents().filter(function() { return this.nodeType == 3; }).each(function(){ this.textContent = this.textContent.replace(/,/ig, " "); }); } });

$(document).on('click', '.tabs-nav li:not(.active)', function(){
    $(this).addClass('active').siblings().removeClass('active');
    var group = $(this).parent('ul').data('group');
    var box = $(this).data('box');
    $('.' + group + ' .box-' + box).addClass('active').siblings().removeClass('active');
    // Получаем текущий URL страницы и удаляем номер страницы из URL, если он есть
    var currentPage = window.location.href.replace(/\/page\/\d+\//, '/');
    // Сохраняем номер выбранной вкладки в localStorage для текущей страницы вместе со временем истечения срока хранения
    var expirationTime = new Date().getTime() + (24 * 60 * 60 * 1000); // текущее время + 24 часа
    var data = {
        selectedTab: box,
        expirationTime: expirationTime
    };
    localStorage.setItem(currentPage + '_selectedTab', JSON.stringify(data));
});

$(function() {
    // Получаем текущий URL страницы и удаляем номер страницы из URL, если он есть
    var currentPage = window.location.href;
    if (currentPage.indexOf('/page/') !== -1) {
        currentPage = currentPage.replace(/\/page\/\d+\//, '/');
    }
    // Получаем данные о номере выбранной вкладки и времени истечения срока хранения из localStorage для текущей страницы
    var data = localStorage.getItem(currentPage + '_selectedTab');
    if (data) {
        data = JSON.parse(data);
        // Проверяем, не истек ли срок хранения номера выбранной вкладки
        if (new Date().getTime() > data.expirationTime) {
            localStorage.removeItem(currentPage + '_selectedTab');
        } else {
            // Если срок хранения не истек, выбираем сохраненную вкладку
            $('.tabs-nav li[data-box="' + data.selectedTab + '"]').trigger('click');
        }
    }
});

const colors = ["#778ca3", "#F57F17", "#5ec162", "#9575CD", "#999", "#00BCD4", "#c57c3b", "#6D4C41", "#5C6BC0", "#FBC02D", "#45aaf2", "#757575", "#EF5350", "#7986CB", "#2bcbba", "#37474F", "#546E7A", "#00838F", "#FFD54F", "#607D8B"];
let colorIndex = 0;

$(document).ready(function() {
    $('.comm-author').each(function() {
        const commentElem = $(this).closest('.comm-item');
        const avatarElem = commentElem.find('.comm-av');

        if (avatarElem.children('img').attr('src') === '/templates/'+dle_skin+'/dleimages/noavatar.png') {
            avatarElem.empty().append(
                $('<div>')
                .addClass('comm-avbox')
                .css('background-color', colors[colorIndex++ % colors.length])
                .text($(this).text().substr(0,1))
            );
        }
    });
});

/* mobile menu */
$(document).ready(() => { const $body = $('body'); const btnMenu = '.btn-menu'; function toggleMenu() { const $sidePanel = $('<div class="side-panel" id="side-panel"></div>'); const $closeOverlay = $('<div class="close-overlay" id="close-overlay"></div>'); $('.block-right.menu').appendTo($sidePanel); $body.append($closeOverlay, $sidePanel); $sidePanel.toggleClass('active'); $closeOverlay.fadeToggle(200); $body.toggleClass('opened-menu'); $(btnMenu).toggleClass('toggle-close'); $closeOverlay.on("click", () => { $sidePanel.removeClass('active'); $closeOverlay.fadeOut(200, function() { $sidePanel.remove(); $closeOverlay.remove(); }); $body.removeClass('opened-menu'); $(btnMenu).removeClass('toggle-close'); }); } $(".btn-menu-wr").on("click", toggleMenu); });

$('#search_btn').click(function() { $('html').toggleClass("search_open");return false;});
for (let i = 1; i <= 5; i++) { $(`.open_hidecat.md${i}`).click(function() { $(`.menu_hidecat.md${i}, .open_hidecat.md${i}`).toggleClass("active"); return false; }); }
$(function(){function Dropdown(selector, linkClass, menuClass, multiple){this.el=$(selector)||{};this.multiple=multiple||false;this.linkClass=linkClass;this.menuClass=menuClass;this.el.find(this.linkClass).on("click",{el:this.el,multiple:this.multiple,menuClass:this.menuClass},this.toggleDropdown);}Dropdown.prototype.toggleDropdown=function(event){var el=event.data.el;var $this=$(this);var $next=$this.next();var menuClass=event.data.menuClass;$next.toggle();$this.parent().toggleClass("open");if(!event.data.multiple){el.find(menuClass).not($next).hide().parent().removeClass("open");}};new Dropdown("#side-panel, .nav-menu",".link",".menu-headnav-list",false);new Dropdown(".footer-navi_menu",".link1",".menu-headnav-list1",false);new Dropdown(".menu-headnav-list",".selyears",".selyears-content",false);});
const setupToggle = (selector) => $(selector).click(function() { $(this).toggleClass('active'); var $panel = $(this).next(); $panel.css('display', $panel.css('display') === 'block' ? 'none' : 'block'); }); setupToggle(".head-right");
/* xsort */
$(document).ready(function() { if (sessionStorage.getItem('xsort_open') === 'true') { $('html').addClass('xsort_open'); } else { $('html').removeClass('xsort_open'); } $('#xsort-button').click(function() { $('html').toggleClass('xsort_open'); sessionStorage.setItem('xsort_open', $('html').hasClass('xsort_open') ? 'true' : 'false'); return false; }); });
(function($){
    function xsort_empty(){
        $("#dle-content").html('<div class="xsort_empty">Ничего не найдено</div>');
    }

    $(document)
    .on('click','.xsort-selected',function(e){
        var ul = $(this).parents('.xsort-div').find('.xsort-ul');
        var d = ul.css('display');
        $('.xsort-ul').hide();
        if(d=='none') ul.slideDown(200);
        return false;
    })
    .on('click','.xsort-ul li',function(){
        $this = $(this);
        var text = $this.text();
        var val = $this.data('val');
        var field = $this.parents('.xsort-ul').data('field');
        var sel = $this.parents('.xsort-div');
        if(val!=='') sel.addClass('xsort-active');
        else sel.removeClass('xsort-active');
        sel = sel.find('.xsort-selected');
        var url = window.location.href;
        if(field=='defaultsort'){
            $this.siblings().removeClass('xasc xdesc');
            sel = sel.find('span');
            if(val!==''){
                if($this.hasClass('xdesc')){
                    $this.removeClass('xdesc').addClass('xasc');
                    sel.attr("class","xasc");
                }else{
                    $this.removeClass('xasc').addClass('xdesc');
                    sel.attr("class","xdesc");
                }
            }else{
                sel.removeClass('xasc xdesc');
            }
        }else{
            if($(this).hasClass('current')){
                $this.parents('.xsort-ul').find('li').eq(0).click();
                return false;
            }
        }
        sel.html(text);
        $this.addClass('current').siblings().removeClass('current');

        if(url.indexOf('/page/')>=0){
            url = url.split('/page/');
            url = url[0]+'/';
        }
        ShowLoading('');
        $(".berrors").remove();
        
        $.ajax({
            url: url,
            type: "POST",
            method: "POST",
            data: {xsort:1,xs_field:field,xs_value:val}
        }).done(function(d){
            HideLoading();
            var html = $("#dle-content", d).html();
            if (html) {
                $("#dle-content").html(html);
                if(url != window.location.href) window.history.pushState(null, null, url);
            } else xsort_empty();
        }).fail(function(d){
            HideLoading();
            xsort_empty();
        })
    })
    .on('click','body:not(.xsort-ul)',function(){
        $('.xsort-ul').fadeOut(100);
    })
    .on('click','.xsort-div-clearall',function(){
        var url = window.location.href.replace(/\/page\/\d+\//i, '/');
        ShowLoading('');
        $(".berrors").remove();
        $.ajax({
            url: url,
            type: "POST",
            method: "POST",
            data: {xsort:1,xs_field:'clearallfields'}
        }).done(function(d){
            HideLoading();
            if (window.location.href == url) {
                window.location.reload();
            } else {
                window.location.href = url;
            }
        }).fail(function(d){
            HideLoading();
            xsort_empty();
        })
    })
})(window.$ || window.jQuery);

/* youtube lazyframe */
class LiteYTEmbed extends HTMLElement {connectedCallback(){this.videoId=this.getAttribute('videoid');let playBtnEl=this.querySelector('.lty-playbtn');this.playLabel=(playBtnEl&&playBtnEl.textContent.trim())||this.getAttribute('playlabel')||'Play';if(!this.style.backgroundImage){this.style.backgroundImage=`url("https://i.ytimg.com/vi/${this.videoId}/hqdefault.jpg")`;}if(!playBtnEl){playBtnEl=document.createElement('button');playBtnEl.type='button';playBtnEl.classList.add('lty-playbtn');this.append(playBtnEl);}if(!playBtnEl.textContent){const playBtnLabelEl=document.createElement('span');playBtnLabelEl.className='lyt-visually-hidden';playBtnLabelEl.textContent=this.playLabel;playBtnEl.append(playBtnLabelEl);}this.addEventListener('pointerover',LiteYTEmbed.warmConnections,{once:true});this.addEventListener('click',this.addIframe);}static addPrefetch(kind,url,as){const linkEl=document.createElement('link');linkEl.rel=kind;linkEl.href=url;if(as){linkEl.as=as;}document.head.append(linkEl);}static warmConnections(){if(LiteYTEmbed.preconnected)return;LiteYTEmbed.addPrefetch('preconnect','https://www.youtube-nocookie.com');LiteYTEmbed.addPrefetch('preconnect','https://www.google.com');LiteYTEmbed.addPrefetch('preconnect','https://googleads.g.doubleclick.net');LiteYTEmbed.addPrefetch('preconnect','https://static.doubleclick.net');LiteYTEmbed.preconnected=true;}addIframe(e){if(this.classList.contains('lyt-activated'))return;e.preventDefault();this.classList.add('lyt-activated');const params=new URLSearchParams(this.getAttribute('params')||[]);params.append('autoplay','1');const iframeEl=document.createElement('iframe');iframeEl.width=560;iframeEl.height=315;iframeEl.title=this.playLabel;iframeEl.allow='accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture';iframeEl.allowFullscreen=true;iframeEl.src=`https://www.youtube-nocookie.com/embed/${encodeURIComponent(this.videoId)}?${params.toString()}`;this.append(iframeEl);iframeEl.focus();}}customElements.define('lite-youtube',LiteYTEmbed);

/* скролл наверх */
$(".scrollup").on("click",()=>{$("html, body").animate({scrollTop:0},200)}).end().on("scroll",()=>{$(this).scrollTop()>600?$(".scrollup").fadeIn():$(".scrollup").fadeOut()});

/* Организация поиска */
// Обработка отправки формы
function submitForm(e) {
    e.preventDefault();
    const query = document.querySelector('#search-input').value;
    window.open(`https://yandex.ru/search/?text=${encodeURIComponent(query + ' site:byrut.org')}`, '_blank');
}

// Показ подсказки при активации поля поиска
function showHint() {
    const hint = document.querySelector('#search-hint');
    if (hint) hint.textContent = 'Введите запрос для поиска';

    const hint2 = document.querySelector('#search-hint2');
    if (hint2) hint2.style.display = '';
}

// Скрытие подсказки при деактивации поля поиска
function hideHint() {
    const hint = document.querySelector('#search-hint');
    if (hint) hint.textContent = 'Поиск ...';

    const searchInput = document.querySelector('#search-input');
    const hint2 = document.querySelector('#search-hint2');

    if (hint2 && searchInput && !searchInput.value) {
        hint2.style.display = '';
    }
}

// Обработка изменений в поле поиска
function inputChange() {
    const searchInput = document.querySelector('#search-input');
    const hint = document.querySelector('#search-hint');

    if (searchInput && hint) {
        if (searchInput.value) {
            hint.style.display = 'none';
        } else {
            hint.style.display = '';
        }
    }
}

// Переключение между различными поисковыми системами
const changeSearchBr = document.querySelector('.change_search_br');
if (changeSearchBr) {
    changeSearchBr.addEventListener('click', function() {
        const quicksearchYa = document.querySelector('#quicksearch.ya_search');
        if (quicksearchYa) quicksearchYa.style.display = 'none';

        const quicksearchBr = document.querySelector('#quicksearch.br_search');
        if (quicksearchBr) quicksearchBr.style.display = 'flex';
    });
}

// Скрытие подсказки при клике вне ее области
document.addEventListener('click', function(e) {
    const searchHint2 = document.querySelector('#search-hint2');
    const changeSearchBr = document.querySelector('.change_search_br');
    const searchInput = document.querySelector('#search-input');

    if (searchHint2 && !searchHint2.contains(e.target) && e.target !== changeSearchBr && e.target !== searchInput) {
        searchHint2.style.display = 'none';
    }
});

// Скрытие dist-dashboard
document.addEventListener('DOMContentLoaded', function() {
    var closeButton = document.querySelector('.dist-dashboard_close');
    var messageBox = document.querySelector('.dist-dashboard');
    if (localStorage.getItem('messageClosed') === 'true') {
        messageBox.style.display = 'none';
    }
    closeButton.addEventListener('click', function() {
        messageBox.style.display = 'none';
        localStorage.setItem('messageClosed', 'true');
    });
});

document.addEventListener("DOMContentLoaded", function() {
    var apptagContainer = document.querySelector('.apptag_ctn');
    if (apptagContainer) {
        var apptags = apptagContainer.querySelectorAll('.apptag a');
        var containerWidth = apptagContainer.offsetWidth;
        var totalWidth = 0;
        apptags.forEach(tag => totalWidth += tag.offsetWidth + 8);
        apptagContainer.querySelector('.button_showtag').style.display = totalWidth > containerWidth ? 'flex' : 'none';
    }
});

function setWithExpiry(key,value,ttl){const now=new Date();const item={value:value,expiry:now.getTime()+ttl};localStorage.setItem(key,JSON.stringify(item));}function getWithExpiry(key){const itemStr=localStorage.getItem(key);if(!itemStr){return null;}const item=JSON.parse(itemStr);const now=new Date();if(now.getTime()>item.expiry){localStorage.removeItem(key);return null;}return item.value;}document.addEventListener('DOMContentLoaded',()=>{const teamStatuses=document.querySelectorAll('.team_status');const valuesDayGroup1=[2,3,4,5,6,7,8,9,10,11,12,13];const valuesDayGroup2=[2,3,4,6,7,9,11,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29];const valuesDayGroup3=[2,3,4,6,7,9,11,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39];const valuesNightGroup1=[26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45];const valuesNightGroup2=[26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59];const valuesNightGroup3=[31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59];const sortTeamAuthors=()=>{const teamSite=document.querySelector('.team_site');const teamAuthors=Array.from(document.querySelectorAll('.team_author'));teamAuthors.sort((a,b)=>{const statusA=a.querySelector('.team_status').textContent.split(': ')[1];const statusB=b.querySelector('.team_status').textContent.split(': ')[1];const timeA=statusA==="Только что"?0:parseInt(statusA,10);const timeB=statusB==="Только что"?0:parseInt(statusB,10);return timeA-timeB;});teamAuthors.forEach((author)=>{teamSite.appendChild(author);});};const updateStatuses=()=>{teamStatuses.forEach((status,index)=>{let storedStatus=getWithExpiry(`status-${index}`);if(storedStatus){status.textContent=storedStatus;return;}let chosenValue;const now=new Date();const hours=now.getUTCHours()+3;const isDayTime=(hours>=6&&hours<=23);let values;let probabilityDay,probabilityNight;if(index<2){probabilityDay=0.73;probabilityNight=0.27;values=isDayTime?valuesDayGroup1:valuesNightGroup1;}else if(index>=2&&index<=6){probabilityDay=0.29;probabilityNight=0.17;values=isDayTime?valuesDayGroup2:valuesNightGroup2;}else{probabilityDay=0.22;probabilityNight=0.11;values=isDayTime?valuesDayGroup3:valuesNightGroup3;}const actualProbability=isDayTime?probabilityDay:probabilityNight;chosenValue=Math.random()<actualProbability?"Только что":values[Math.floor(Math.random()*values.length)];if(typeof chosenValue==='number'){let minutesText='минут';const lastDigit=chosenValue%10;const lastTwoDigits=chosenValue%100;if(chosenValue===1||(lastDigit===1&&lastTwoDigits!==11)){minutesText='минуту';}else if(lastDigit>=2&&lastDigit<=4&&(lastTwoDigits<10||lastTwoDigits>=20)){minutesText='минуты';}const finalStatus=`Был: ${chosenValue} ${minutesText} назад`;status.textContent=finalStatus;setWithExpiry(`status-${index}`,finalStatus,7*60*1000);}else{const finalStatus=`Был: ${chosenValue}`;status.textContent=finalStatus;setWithExpiry(`status-${index}`,finalStatus,7*60*1000);}});sortTeamAuthors();};updateStatuses();})
;!function(i,e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):i.Fresco=e(jQuery)}(this,function($){var Fresco={};$.extend(Fresco,{version:"2.3.0"}),Fresco.Skins={fresco:{}};var Bounds={viewport:function(){var i={width:$(window).width()};if(Browser.MobileSafari||Browser.Android&&Browser.Gecko){var e=document.documentElement.clientWidth/window.innerWidth;i.height=window.innerHeight*e}else i.height=$(window).height();return i}},Browser=(e=navigator.userAgent,{IE:!(!window.attachEvent||-1!==e.indexOf("Opera"))&&f("MSIE "),Opera:-1<e.indexOf("Opera")&&(!!window.opera&&opera.version&&parseFloat(opera.version())||7.55),WebKit:-1<e.indexOf("AppleWebKit/")&&f("AppleWebKit/"),Gecko:-1<e.indexOf("Gecko")&&-1===e.indexOf("KHTML")&&f("rv:"),MobileSafari:!!e.match(/Apple.*Mobile.*Safari/),Chrome:-1<e.indexOf("Chrome")&&f("Chrome/"),ChromeMobile:-1<e.indexOf("CrMo")&&f("CrMo/"),Android:-1<e.indexOf("Android")&&f("Android "),IEMobile:-1<e.indexOf("IEMobile")&&f("IEMobile/")}),e;function f(i){var t=new RegExp(i+"([\\d.]+)").exec(e);return!t||parseFloat(t[1])}var _slice=Array.prototype.slice;function baseToString(i){return"string"==typeof i?i:null==i?"":i+""}var _={isElement:function(i){return i&&1===i.nodeType},String:{capitalize:function(i){return(i=baseToString(i))&&i.charAt(0).toUpperCase()+i.slice(1)}}};$(document.documentElement).on("mousewheel DOMMouseScroll",function(i){var e;if(i.originalEvent.wheelDelta?e=i.originalEvent.wheelDelta/120:i.originalEvent.detail&&(e=-i.originalEvent.detail/3),e){var t=$.Event("fresco:mousewheel");$(i.target).trigger(t,e),t.isPropagationStopped()&&i.stopPropagation(),t.isDefaultPrevented()&&i.preventDefault()}});var Fit={within:function(i,e){for(var t=$.extend({height:!0,width:!0},arguments[2]||{}),s=$.extend({},e),n=1,o=5,a=t.width,h=t.height;0<o&&(a&&s.width>i.width||h&&s.height>i.height);){var r=1,d=1;a&&s.width>i.width&&(r=i.width/s.width),h&&s.height>i.height&&(d=i.height/s.height),n=Math.min(r,d),s={width:e.width*n,height:e.height*n},o--}return s.width=Math.max(s.width,0),s.height=Math.max(s.height,0),s}};$.extend($.easing,{frescoEaseInCubic:function(i,e,t,s,n){return s*(e/=n)*e*e+t},frescoEaseInSine:function(i,e,t,s,n){return-s*Math.cos(e/n*(Math.PI/2))+s+t},frescoEaseOutSine:function(i,e,t,s,n){return s*Math.sin(e/n*(Math.PI/2))+t}});var Support=(O=document.createElement("div"),P="Webkit Moz O ms Khtml".split(" "),{canvas:(ba=document.createElement("canvas"),!(!ba.getContext||!ba.getContext("2d"))),css:{animation:S("animation"),transform:S("transform"),prefixed:function(i){return S(i,"prefix")}},svg:!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,touch:function(){try{return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}catch(i){return!1}}()}),ba,O,P;function S(i,e){var t=i.charAt(0).toUpperCase()+i.substr(1);return function(i,e){for(var t in i)if(void 0!==O.style[i[t]])return"prefix"!==e||i[t];return!1}((i+" "+P.join(t+" ")+t).split(" "),e)}Support.detectMobileTouch=function(){Support.mobileTouch=Support.touch&&(Browser.MobileSafari||Browser.Android||Browser.IEMobile||Browser.ChromeMobile||!/^(Win|Mac|Linux)/.test(navigator.platform))},Support.detectMobileTouch();var ImageReady=function(){return this.initialize.apply(this,Array.prototype.slice.call(arguments))};function Timers(){return this.initialize.apply(this,_slice.call(arguments))}function getURIData(s){var n={type:"image"};return $.each(Types,function(i,e){var t=e.data(s);t&&((n=t).type=i,n.url=s)}),n}function detectExtension(i){var e=(i||"").replace(/\?.*/g,"").match(/\.([^.]{3,4})$/);return e?e[1].toLowerCase():null}$.extend(ImageReady.prototype,{supports:{naturalWidth:"naturalWidth"in new Image},initialize:function(i,e,t){this.img=$(i)[0],this.successCallback=e,this.errorCallback=t,this.isLoaded=!1,this.options=$.extend({method:"naturalWidth",pollFallbackAfter:1e3},arguments[3]||{}),this.supports.naturalWidth&&"onload"!==this.options.method?this.img.complete&&"undefined"!==$.type(this.img.naturalWidth)?setTimeout($.proxy(function(){0<this.img.naturalWidth?this.success():this.error()},this)):($(this.img).bind("error",$.proxy(function(){setTimeout($.proxy(function(){this.error()},this))},this)),this.intervals=[[1e3,10],[2e3,50],[4e3,100],[2e4,500]],this._ipos=0,this._time=0,this._delay=this.intervals[this._ipos][1],this.poll()):setTimeout($.proxy(this.fallback,this))},poll:function(){this._polling=setTimeout($.proxy(function(){if(0<this.img.naturalWidth)this.success();else{if(this._time+=this._delay,this.options.pollFallbackAfter&&this._time>=this.options.pollFallbackAfter&&!this._usedPollFallback&&(this._usedPollFallback=!0,this.fallback()),this._time>this.intervals[this._ipos][0]){if(!this.intervals[this._ipos+1])return void this.error();this._ipos++,this._delay=this.intervals[this._ipos][1]}this.poll()}},this),this._delay)},fallback:function(){var i=new Image;(this._fallbackImg=i).onload=$.proxy(function(){i.onload=function(){},this.supports.naturalWidth||(this.img.naturalWidth=i.width,this.img.naturalHeight=i.height),this.success()},this),i.onerror=$.proxy(this.error,this),i.src=this.img.src},abort:function(){this._fallbackImg&&(this._fallbackImg.onload=function(){}),this._polling&&(clearTimeout(this._polling),this._polling=null)},success:function(){this._calledSuccess||(this._calledSuccess=!0,this.isLoaded=!0,this.successCallback(this))},error:function(){this._calledError||(this._calledError=!0,this.abort(),this.errorCallback&&this.errorCallback(this))}}),$.extend(Timers.prototype,{initialize:function(){this._timers={}},set:function(i,e,t){this._timers[i]=setTimeout(e,t)},get:function(i){return this._timers[i]},clear:function(i){i?this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]):this.clearAll()},clearAll:function(){$.each(this._timers,function(i,e){clearTimeout(e)}),this._timers={}}});var Type={isVideo:function(i){return/^(youtube|vimeo)$/.test(i)}},Types={image:{extensions:"bmp gif jpeg jpg png webp",detect:function(i){return-1<$.inArray(detectExtension(i),this.extensions.split(" "))},data:function(i){return!!this.detect()&&{extension:detectExtension(i)}}},vimeo:{detect:function(i){var e=/(vimeo\.com)\/([a-zA-Z0-9-_]+)(?:\S+)?$/i.exec(i);return!(!e||!e[2])&&e[2]},data:function(i){var e=this.detect(i);return!!e&&{id:e}}},youtube:{detect:function(i){var e=/(youtube\.com|youtu\.be)\/watch\?(?=.*vi?=([a-zA-Z0-9-_]+))(?:\S+)?$/.exec(i);return e&&e[2]?e[2]:!(!(e=/(youtube\.com|youtu\.be)\/(vi?\/|u\/|embed\/)?([a-zA-Z0-9-_]+)(?:\S+)?$/i.exec(i))||!e[3])&&e[3]},data:function(i){var e=this.detect(i);return!!e&&{id:e}}}},VimeoThumbnail=function(){function i(){return this.initialize.apply(this,_slice.call(arguments))}$.extend(i.prototype,{initialize:function(i,e,t){this.url=i,this.successCallback=e,this.errorCallback=t,this.load()},load:function(){var i=s.get(this.url);if(i)return this.successCallback(i.data.url);var e="http"+(window.location&&"https:"===window.location.protocol?"s":"")+":",t=getURIData(this.url).id;this._xhr=$.getJSON(e+"//vimeo.com/api/oembed.json?url="+e+"//vimeo.com/"+t+"&callback=?",$.proxy(function(i){if(i&&i.thumbnail_url){var e={url:i.thumbnail_url};s.set(this.url,e),this.successCallback(e.url)}else this.errorCallback()},this))},abort:function(){this._xhr&&(this._xhr.abort(),this._xhr=null)}});var s={cache:[],get:function(i){for(var e=null,t=0;t<this.cache.length;t++)this.cache[t]&&this.cache[t].url===i&&(e=this.cache[t]);return e},set:function(i,e){this.remove(i),this.cache.push({url:i,data:e})},remove:function(i){for(var e=0;e<this.cache.length;e++)this.cache[e]&&this.cache[e].url===i&&delete this.cache[e]}};return i}(),VimeoReady=function(){function i(){return this.initialize.apply(this,_slice.call(arguments))}$.extend(i.prototype,{initialize:function(i,e){this.url=i,this.callback=e,this.load()},load:function(){var i=s.get(this.url);if(i)return this.callback(i.data);var e="http"+(window.location&&"https:"===window.location.protocol?"s":"")+":",t=getURIData(this.url).id;this._xhr=$.getJSON(e+"//vimeo.com/api/oembed.json?url="+e+"//vimeo.com/"+t+"&maxwidth=9999999&maxheight=9999999&callback=?",$.proxy(function(i){var e={dimensions:{width:i.width,height:i.height}};s.set(this.url,e),this.callback&&this.callback(e)},this))},abort:function(){this._xhr&&(this._xhr.abort(),this._xhr=null)}});var s={cache:[],get:function(i){for(var e=null,t=0;t<this.cache.length;t++)this.cache[t]&&this.cache[t].url===i&&(e=this.cache[t]);return e},set:function(i,e){this.remove(i),this.cache.push({url:i,data:e})},remove:function(i){for(var e=0;e<this.cache.length;e++)this.cache[e]&&this.cache[e].url===i&&delete this.cache[e]}};return i}(),Options={defaults:{effects:{content:{show:0,hide:0},spinner:{show:150,hide:150},window:{show:440,hide:300},thumbnail:{show:300,delay:150},thumbnails:{slide:0}},keyboard:{left:!0,right:!0,esc:!0},loadedMethod:"naturalWidth",loop:!1,onClick:"previous-next",overflow:!1,overlay:{close:!0},preload:[1,2],position:!0,skin:"fresco",spinner:!0,spinnerDelay:300,sync:!0,thumbnails:"horizontal",ui:"outside",uiDelay:3e3,vimeo:{autoplay:1,api:1,title:1,byline:1,portrait:0,loop:0},youtube:{autoplay:1,controls:1,enablejsapi:1,hd:1,iv_load_policy:3,loop:0,modestbranding:1,rel:0,vq:"hd1080"},initialTypeOptions:{image:{},vimeo:{width:1280},youtube:{width:1280,height:720}}},create:function(i,e,t){t=t||{},(i=i||{}).skin=i.skin||this.defaults.skin;var s=i.skin?$.extend({},Fresco.Skins[i.skin]||Fresco.Skins[this.defaults.skin]):{},n=$.extend(!0,{},this.defaults,s);n.initialTypeOptions&&(e&&n.initialTypeOptions[e]&&(n=$.extend(!0,{},n.initialTypeOptions[e],n)),delete n.initialTypeOptions);var o=$.extend(!0,{},n,i);if(Support.mobileTouch&&"inside"===o.ui&&(o.ui="outside"),(!o.effects||Browser.IE&&Browser.IE<9)&&(o.effects={},$.each(this.defaults.effects,function(e,i){$.each(o.effects[e]=$.extend({},i),function(i){o.effects[e][i]=0})}),o.spinner=!1),o.keyboard&&("boolean"===$.type(o.keyboard)&&(o.keyboard={},$.each(this.defaults.keyboard,function(i,e){o.keyboard[i]=!0})),"vimeo"!==e&&"youtube"!==e||$.extend(o.keyboard,{left:!1,right:!1})),!o.overflow||Support.mobileTouch?o.overflow={x:!1,y:!1}:"boolean"===$.type(o.overflow)&&(o.overflow={x:!1,y:!0}),"vimeo"!==e&&"youtube"!==e||(o.overlap=!1),(Browser.IE&&Browser.IE<9||Support.mobileTouch)&&(o.thumbnail=!1,o.thumbnails=!1),"youtube"!==e&&(o.width&&!o.maxWidth&&(o.maxWidth=o.width),o.height&&!o.maxHeight&&(o.maxHeight=o.height)),!o.thumbnail&&"boolean"!==$.type(o.thumbnail)){var a=!1;switch(e){case"youtube":a="http"+(window.location&&"https:"===window.location.protocol?"s":"")+":"+"//img.youtube.com/vi/"+t.id+"/0.jpg";break;case"image":case"vimeo":a=!0}o.thumbnail=a}return o}},Overlay={initialize:function(){this.build(),this.visible=!1},build:function(){this.element=$("<div>").addClass("fr-overlay").hide().append($("<div>").addClass("fr-overlay-background")),this.element.on("click",$.proxy(function(){var i=Pages.page;i&&i.view&&i.view.options.overlay&&!i.view.options.overlay.close||Window.hide()},this)),Support.mobileTouch&&this.element.addClass("fr-mobile-touch"),this.element.on("fresco:mousewheel",function(i){i.preventDefault()})},setSkin:function(i){this.skin&&this.element.removeClass("fr-overlay-skin-"+this.skin),this.element.addClass("fr-overlay-skin-"+i),this.skin=i},attach:function(){$(document.body).append(this.element)},detach:function(){this.element.detach()},show:function(i,e){if(this.visible)i&&i();else{this.visible=!0,this.attach(),this.max();var t=Pages.page&&Pages.page.view.options.effects.window.show||0,s=("number"===$.type(e)?e:t)||0;this.element.stop(!0).fadeTo(s,1,i)}},hide:function(i,e){if(this.visible){var t=Pages.page&&Pages.page.view.options.effects.window.hide||0,s=("number"===$.type(e)?e:t)||0;this.element.stop(!0).fadeOut(s||0,$.proxy(function(){this.detach(),this.visible=!1,i&&i()},this))}else i&&i()},getScrollDimensions:function(){var n={};return $.each(["width","height"],function(i,e){var t=e.substr(0,1).toUpperCase()+e.substr(1),s=document.documentElement;n[e]=(Browser.IE?Math.max(s["offset"+t],s["scroll"+t]):Browser.WebKit?document.body["scroll"+t]:s["scroll"+t])||0}),n},max:function(){var i;if(Browser.MobileSafari&&Browser.WebKit&&Browser.WebKit<533.18&&(i=this.getScrollDimensions(),this.element.css(i)),Browser.IE&&Browser.IE<9){var e=Bounds.viewport();this.element.css({height:e.height,width:e.width})}Support.mobileTouch&&!i&&this.element.css({height:this.getScrollDimensions().height})}},Window={initialize:function(){this.queues=[],this.queues.hide=$({}),this.pages=[],this._tracking=[],this._first=!0,this.timers=new Timers,this.build(),this.setSkin(Options.defaults.skin)},build:function(){if(this.element=$("<div>").addClass("fr-window fr-measured").hide().append(this._box=$("<div>").addClass("fr-box").append(this._pages=$("<div>").addClass("fr-pages"))).append(this._thumbnails=$("<div>").addClass("fr-thumbnails")),Overlay.initialize(),Pages.initialize(this._pages),Thumbnails.initialize(this._thumbnails),Spinner.initialize(),UI.initialize(),this.element.addClass("fr"+(Support.mobileTouch?"":"-no")+"-mobile-touch"),this.element.addClass("fr"+(Support.svg?"":"-no")+"-svg"),Browser.IE)for(var i=7;i<=9;i++)Browser.IE<i&&this.element.addClass("fr-ltIE"+i);this.element.on("fresco:mousewheel",function(i){i.preventDefault()})},attach:function(){this._attached||($(document.body).append(this.element),this._attached=!0)},detach:function(){this._attached&&(this.element.detach(),this._attached=!1)},setSkin:function(i){this._skin&&this.element.removeClass("fr-window-skin-"+this._skin),this.element.addClass("fr-window-skin-"+i),Overlay.setSkin(i),this._skin=i},setShowingType:function(i){this._showingType!==i&&(this._showingType&&(this.element.removeClass("fr-showing-type-"+this._showingType),Type.isVideo(this._showingType)&&this.element.removeClass("fr-showing-type-video")),this.element.addClass("fr-showing-type-"+i),Type.isVideo(i)&&this.element.addClass("fr-showing-type-video"),this._showingType=i)},startObservingResize:function(){this._onWindowResizeHandler||$(window).on("resize orientationchange",this._onWindowResizeHandler=$.proxy(this._onWindowResize,this))},stopObservingResize:function(){this._onWindowResizeHandler&&($(window).off("resize orientationchange",this._onWindowResizeHandler),this._onWindowResizeHandler=null)},_onScroll:function(){Support.mobileTouch&&this.timers.set("scroll",$.proxy(this.adjustToScroll,this),0)},_onWindowResize:function(){var i;(i=Pages.page)&&(Thumbnails.fitToViewport(),this.updateBoxDimensions(),i.fitToBox(),UI.update(),UI.adjustPrevNext(null,0),Spinner.center(),Overlay.max(),UI._onWindowResize(),this._onScroll())},adjustToScroll:function(){Support.mobileTouch&&this.element.css({top:$(window).scrollTop()})},getBoxDimensions:function(){return this._boxDimensions},updateBoxDimensions:function(){if(Pages.page){var i=Bounds.viewport(),e=Thumbnails.getDimensions(),t="horizontal"===Thumbnails._orientation;this._boxDimensions={width:t?i.width:i.width-e.width,height:t?i.height-e.height:i.height},this._boxPosition={top:0,left:t?0:e.width},this._box.css($.extend({},this._boxDimensions,this._boxPosition))}},show:function(i,e){if(this.visible)i&&i();else{this.visible=!0,this.opening=!0,this.attach(),this.timers.clear("show-window"),this.timers.clear("hide-overlay"),this.adjustToScroll();var t=("number"===$.type(e)?e:Pages.page&&Pages.page.view.options.effects.window.show)||0,s=2;Overlay[Pages.page&&Pages.page.view.options.overlay?"show":"hide"](function(){i&&--s<1&&i()},t),this.timers.set("show-window",$.proxy(function(){this._show($.proxy(function(){this.opening=!1,i&&--s<1&&i()},this),t)},this),1<t?Math.min(.5*t,50):1)}},_show:function(i,e){var t=("number"===$.type(e)?e:Pages.page&&Pages.page.view.options.effects.window.show)||0;this.element.stop(!0).fadeTo(t,1,i)},hide:function(e){if(this.view){var i=this.queues.hide;i.queue([]),this.timers.clear("show-window"),this.timers.clear("hide-overlay");var t=Pages.page?Pages.page.view.options.effects.window.hide:0;i.queue($.proxy(function(i){Pages.stop(),Spinner.hide(),i()},this)),i.queue($.proxy(function(i){UI.disable(),UI.hide(null,t),Keyboard.disable(),i()},this)),i.queue($.proxy(function(i){var e=2;this._hide(function(){--e<1&&i()},t),this.timers.set("hide-overlay",$.proxy(function(){Overlay.hide(function(){--e<1&&i()},t)},this),1<t?Math.min(.5*t,150):1),this._first=!0},this)),i.queue($.proxy(function(i){this._reset(),this.stopObservingResize(),Pages.removeAll(),Thumbnails.clear(),this.timers.clear(),this._position=-1;var e=Pages.page&&Pages.page.view.options.afterHide;"function"===$.type(e)&&e.call(Fresco),this.view=null,this.opening=!1,this.closing=!1,this.detach(),i()},this)),"function"===$.type(e)&&i.queue($.proxy(function(i){e(),i()},this))}},_hide:function(i,e){var t=("number"===$.type(e)?e:Pages.page&&Pages.page.view.options.effects.window.hide)||0;this.element.stop(!0).fadeOut(t,i)},load:function(i,e){this.views=i,this.attach(),Thumbnails.load(i),Pages.load(i),this.startObservingResize(),e&&this.setPosition(e)},setPosition:function(i,e){this._position=i,this.view=this.views[i-1],this.stopHideQueue(),this.page=Pages.show(i,$.proxy(function(){e&&e()},this))},stopHideQueue:function(){this.queues.hide.queue([])},_reset:function(){this.visible=!1,UI.hide(null,0),UI.reset()},mayPrevious:function(){return this.view&&this.view.options.loop&&this.views&&1<this.views.length||1!==this._position},previous:function(i){var e=this.mayPrevious();(i||e)&&this.setPosition(this.getSurroundingIndexes().previous)},mayNext:function(){var i=this.views&&1<this.views.length;return this.view&&this.view.options.loop&&i||i&&1!==this.getSurroundingIndexes().next},next:function(i){var e=this.mayNext();(i||e)&&this.setPosition(this.getSurroundingIndexes().next)},getSurroundingIndexes:function(){if(!this.views)return{};var i=this._position,e=this.views.length;return{previous:i<=1?e:i-1,next:e<=i?1:i+1}}},Keyboard={enabled:!1,keyCode:{left:37,right:39,esc:27},enable:function(i){this.disable(),i&&($(document).on("keydown",this._onKeyDownHandler=$.proxy(this.onKeyDown,this)).on("keyup",this._onKeyUpHandler=$.proxy(this.onKeyUp,this)),this.enabled=i)},disable:function(){this.enabled=!1,this._onKeyUpHandler&&($(document).off("keyup",this._onKeyUpHandler).off("keydown",this._onKeyDownHandler),this._onKeyUpHandler=this._onKeyDownHandler=null)},onKeyDown:function(i){if(this.enabled){var e=this.getKeyByKeyCode(i.keyCode);if(e&&(!e||!this.enabled||this.enabled[e]))switch(i.preventDefault(),i.stopPropagation(),e){case"left":Window.previous();break;case"right":Window.next()}}},onKeyUp:function(i){if(this.enabled){var e=this.getKeyByKeyCode(i.keyCode);if(e&&(!e||!this.enabled||this.enabled[e]))switch(e){case"esc":Window.hide()}}},getKeyByKeyCode:function(i){for(var e in this.keyCode)if(this.keyCode[e]===i)return e;return null}},Page=(Lc=0,Mc={},Nc=$("<div>").addClass("fr-stroke fr-stroke-top fr-stroke-horizontal").append($("<div>").addClass("fr-stroke-color")).add($("<div>").addClass("fr-stroke fr-stroke-bottom fr-stroke-horizontal").append($("<div>").addClass("fr-stroke-color"))).add($("<div>").addClass("fr-stroke fr-stroke-left fr-stroke-vertical").append($("<div>").addClass("fr-stroke-color"))).add($("<div>").addClass("fr-stroke fr-stroke-right fr-stroke-vertical").append($("<div>").addClass("fr-stroke-color"))),$.extend(Oc.prototype,{initialize:function(i,e,t){this.view=i,this.dimensions={width:0,height:0},this.uid=Lc++,this._position=e,this._total=t,this._fullClick=!1,this._visible=!1,this.queues={},this.queues.showhide=$({})},create:function(){if(!this._created){Pages.element.append(this.element=$("<div>").addClass("fr-page").append(this.container=$("<div>").addClass("fr-container")).css({opacity:0}).hide());var i=this.view.options.position&&1<this._total;if(i&&this.element.addClass("fr-has-position"),(this.view.caption||i)&&(this.element.append(this.info=$("<div>").addClass("fr-info").append($("<div>").addClass("fr-info-background")).append(Nc.clone(!0)).append(this.infoPadder=$("<div>").addClass("fr-info-padder"))),i&&(this.element.addClass("fr-has-position"),this.infoPadder.append(this.pos=$("<div>").addClass("fr-position").append($("<span>").addClass("fr-position-text").html(this._position+" / "+this._total)))),this.view.caption&&this.infoPadder.append(this.caption=$("<div>").addClass("fr-caption").html(this.view.caption))),this.container.append(this.background=$("<div>").addClass("fr-content-background")).append(this.content=$("<div>").addClass("fr-content")),"image"==this.view.type&&(this.content.append(this.image=$("<img>").addClass("fr-content-element").attr({src:this.view.url})),this.content.append(Nc.clone(!0))),i&&"outside"==this.view.options.ui&&this.container.append(this.positionOutside=$("<div>").addClass("fr-position-outside").append($("<div>").addClass("fr-position-background")).append($("<span>").addClass("fr-position-text").html(this._position+" / "+this._total))),"inside"==this.view.options.ui){this.content.append(this.previousInside=$("<div>").addClass("fr-side fr-side-previous fr-toggle-ui").append($("<div>").addClass("fr-side-button").append($("<div>").addClass("fr-side-button-background")).append($("<div>").addClass("fr-side-button-icon")))).append(this.nextInside=$("<div>").addClass("fr-side fr-side-next fr-toggle-ui").append($("<div>").addClass("fr-side-button").append($("<div>").addClass("fr-side-button-background")).append($("<div>").addClass("fr-side-button-icon")))).append(this.closeInside=$("<div>").addClass("fr-close fr-toggle-ui").append($("<div>").addClass("fr-close-background")).append($("<div>").addClass("fr-close-icon"))),(this.view.caption||i&&this.view.grouped.caption)&&(this.content.append(this.infoInside=$("<div>").addClass("fr-info fr-toggle-ui").append($("<div>").addClass("fr-info-background")).append(Nc.clone(!0)).append(this.infoPadderInside=$("<div>").addClass("fr-info-padder"))),i&&this.infoPadderInside.append(this.posInside=$("<div>").addClass("fr-position").append($("<span>").addClass("fr-position-text").html(this._position+" / "+this._total))),this.view.caption&&this.infoPadderInside.append(this.captionInside=$("<div>").addClass("fr-caption").html(this.view.caption))),this.view.caption||!i||this.view.grouped.caption||this.content.append(this.positionInside=$("<div>").addClass("fr-position-inside fr-toggle-ui").append($("<div>").addClass("fr-position-background")).append($("<span>").addClass("fr-position-text").html(this._position+" / "+this._total)));var e=this.view.options.loop&&1<this._total||1!=this._position,t=this.view.options.loop&&1<this._total||this._position<this._total;this.previousInside[(e?"remove":"add")+"Class"]("fr-side-disabled"),this.nextInside[(t?"remove":"add")+"Class"]("fr-side-disabled")}$.each(["x","y"],$.proxy(function(i,e){this.view.options.overflow[e]&&this.element.addClass("fr-overflow-"+e)},this)),this.element.addClass("fr-type-"+this.view.type),Type.isVideo(this.view.type)&&this.element.addClass("fr-type-video"),this._total<2&&this.element.addClass("fr-no-sides"),this._created=!0}},_getSurroundingPages:function(){var i;if(!(i=this.view.options.preload))return[];for(var e=[],t=Math.max(1,this._position-i[0]),s=Math.min(this._position+i[1],this._total),n=this._position,o=n;o<=s;o++)(a=Pages.pages[o-1])._position!=n&&e.push(a);for(o=n;t<=o;o--){var a;(a=Pages.pages[o-1])._position!=n&&e.push(a)}return e},preloadSurroundingImages:function(){var i=this._getSurroundingPages();$.each(i,$.proxy(function(i,e){e.preload()},this))},preload:function(){this.preloading||this.preloaded||"image"!=this.view.type||!this.view.options.preload||this.loaded||(this.create(),this.preloading=!0,this.preloadReady=new ImageReady(this.image[0],$.proxy(function(i){this.loaded=!0,Mc[this.view.url]=!0,this.preloading=!1,this.preloaded=!0,this.dimensions={width:i.img.naturalWidth,height:i.img.naturalHeight}},this),null,{method:"naturalWidth"}))},load:function(e,i){if(this.create(),this.loaded)e&&e();else switch(this.abort(),this.loading=!0,this.view.options.spinner&&(this._spinnerDelay=setTimeout($.proxy(function(){Spinner.show()},this),this.view.options.spinnerDelay||0)),this.view.type){case"image":if(this.error)return void(e&&e());this.imageReady=new ImageReady(this.image[0],$.proxy(function(i){this._markAsLoaded(),this.setDimensions({width:i.img.naturalWidth,height:i.img.naturalHeight}),e&&e()},this),$.proxy(function(){this._markAsLoaded(),this.image.hide(),this.content.prepend(this.error=$("<div>").addClass("fr-error fr-content-element").append($("<div>").addClass("fr-error-icon"))),this.element.addClass("fr-has-error"),this.setDimensions({width:this.error.outerWidth(),height:this.error.outerHeight()}),this.error.css({width:"100%",height:"100%"}),e&&e()},this),{method:this.view.options.loadedMethod});break;case"vimeo":this.vimeoReady=new VimeoReady(this.view.url,$.proxy(function(i){this._markAsLoaded(),this.setDimensions({width:i.dimensions.width,height:i.dimensions.height}),e&&e()},this));break;case"youtube":this._markAsLoaded(),this.setDimensions({width:this.view.options.width,height:this.view.options.height}),e&&e()}},setDimensions:function(i){if(this.dimensions=i,this.view.options.maxWidth||this.view.options.maxHeight){var e=this.view.options,t={width:e.maxWidth?e.maxWidth:this.dimensions.width,height:e.maxHeight?e.maxHeight:this.dimensions.height};this.dimensions=Fit.within(t,this.dimensions)}},_markAsLoaded:function(){this._abortSpinnerDelay(),this.loading=!1,this.loaded=!0,Mc[this.view.url]=!0,Spinner.hide(null,null,this._position)},isVideo:function(){return Type.isVideo(this.view.type)},insertVideo:function(i){if(!this.playerIframe&&this.isVideo()){var e="http"+(window.location&&"https:"===window.location.protocol?"s":"")+":",t=$.extend({},this.view.options[this.view.type]||{}),s=$.param(t),n={vimeo:e+"//player.vimeo.com/video/{id}?{queryString}",youtube:e+"//www.youtube.com/embed/{id}?{queryString}"}[this.view.type].replace("{id}",this.view._data.id).replace("{queryString}",s);this.content.prepend(this.playerIframe=$("<iframe webkitAllowFullScreen mozallowfullscreen allowFullScreen>").addClass("fr-content-element").attr({src:n,height:this._contentDimensions.height,width:this._contentDimensions.width,frameborder:0})),i&&i()}else i&&i()},raise:function(){var i=Pages.element[0].lastChild;i&&i===this.element[0]||Pages.element.append(this.element)},show:function(e){var i=this.queues.showhide;i.queue([]),i.queue($.proxy(function(i){var e=this.view.options.spinner&&!Mc[this.view.url];Spinner._visible&&!e&&Spinner.hide(),Pages.stopInactive(),i()},this)),i.queue($.proxy(function(i){this.updateUI(),UI.set(this._ui),i()},this)),i.queue($.proxy(function(i){Keyboard.enable(this.view.options.keyboard),i()},this)),i.queue($.proxy(function(i){Spinner.setSkin(this.view.options.skin),this.load($.proxy(function(){this.preloadSurroundingImages(),i()},this))},this)),i.queue($.proxy(function(i){this.raise(),Window.setSkin(this.view.options.skin),UI.enable(),this.fitToBox(),Window.adjustToScroll(),i()},this)),this.isVideo()&&i.queue($.proxy(function(i){this.insertVideo($.proxy(function(){i()}))},this)),this.view.options.sync||i.queue($.proxy(function(i){Pages.hideInactive(i)},this)),i.queue($.proxy(function(i){var e=3,t=this.view.options.effects.content.show;Window.setShowingType(this.view.type),Window.visible||(t=this.view.options.effects.window.show,"function"===$.type(this.view.options.onShow)&&this.view.options.onShow.call(Fresco)),this.view.options.sync&&(e++,Pages.hideInactive(function(){--e<1&&i()})),Window.show(function(){--e<1&&i()},this.view.options.effects.window.show),this._show(function(){--e<1&&i()},t),UI.adjustPrevNext(function(){--e<1&&i()},Window._first?0:t),Window._first?(UI.show(null,0),Window._first=!1):UI.show(null,0);var s=this.view.options.afterPosition;"function"===$.type(s)&&s.call(Fresco,this._position)},this)),i.queue($.proxy(function(i){this._visible=!0,e&&e(),i()},this))},_show:function(i,e){var t=Window.visible?"number"===$.type(e)?e:this.view.options.effects.content.show:0;this.element.stop(!0).show().fadeTo(t||0,1,i)},hide:function(i,e){if(this.element){this.removeVideo(),this.abort();var t="number"===$.type(e)?e:this.view.options.effects.content.hide;this.isVideo()&&(t=0),this.element.stop(!0).fadeTo(t,0,"frescoEaseInCubic",$.proxy(function(){this.element.hide(),this._visible=!1,Pages.removeTracking(this._position),i&&i()},this))}else i&&i()},stop:function(){this.queues.showhide.queue([]),this.element&&this.element.stop(!0),this.abort()},removeVideo:function(){this.playerIframe&&(this.playerIframe[0].src="//about:blank",this.playerIframe.remove(),this.playerIframe=null)},remove:function(){this.stop(),this.removeVideo(),this.element&&this.element.remove(),this._track&&(Pages.removeTracking(this._position),this._track=!1),this.preloadReady&&(this.preloadReady.abort(),this.preloadReady=null,this.preloading=null,this.preloaded=null),this._visible=!1,this.removed=!0},abort:function(){this.imageReady&&(this.imageReady.abort(),this.imageReady=null),this.vimeoReady&&(this.vimeoReady.abort(),this.vimeoReady=null),this._abortSpinnerDelay(),this.loading=!1},_abortSpinnerDelay:function(){this._spinnerDelay&&(clearTimeout(this._spinnerDelay),this._spinnerDelay=null)},_getInfoHeight:function(i){var e=this.view.options.position&&1<this._total;switch(this._ui){case"fullclick":case"inside":if(!this.view.caption&&!e)return 0;break;case"outside":if(!this.view.caption)return 0}var t="inside"===this._ui?this.infoInside:this.info;"outside"===this._ui&&(i=Math.min(i,Window._boxDimensions.width));var s,n=t[0].style.width;return"inside"!==this._ui&&"fullclick"!==this._ui||(n="100%"),t.css({width:i+"px"}),s=parseFloat(t.outerHeight()),t.css({width:n}),s},_whileVisible:function(i,e){var t=[],s=Window.element.add(this.element);e&&(s=s.add(e)),$.each(s,function(i,e){$(e).is(":visible")||t.push($(e).show())});var n=this.element.hasClass("fr-no-caption");this.element.removeClass("fr-no-caption");var o=this.element.hasClass("fr-has-caption");this.element.addClass("fr-has-caption"),Window.element.css({visibility:"hidden"}),i(),Window.element.css({visibility:"visible"}),n&&this.element.addClass("fr-no-caption"),o||this.element.removeClass("fr-has-caption"),$.each(t,function(i,e){e.hide()})},updateForced:function(){this.create(),this._fullClick=this.view.options.fullClick,this._noOverflow=!1,0<parseInt(this.element.css("min-width"))&&(this._fullClick=!0),0<parseInt(this.element.css("min-height"))&&(this._noOverflow=!0)},updateUI:function(){this.updateForced();var i=this._fullClick?"fullclick":this.view.options.ui;this._ui&&this.element.removeClass("fr-ui-"+this._ui),this.element.addClass("fr-ui-"+i),this._ui=i},fitToBox:function(){if(this.content){this.element;var t=$.extend({},Window.getBoxDimensions()),i=$.extend({},this.dimensions),e=this.container;this.updateUI();var s={left:parseInt(e.css("padding-left")),top:parseInt(e.css("padding-top"))};if("outside"===this._ui&&this._positionOutside){var n=0;this._whileVisible($.proxy(function(){this._positionOutside.is(":visible")&&(n=this._positionOutside.outerWidth(!0))},this)),n>s.left&&(s.left=n)}t.width-=2*s.left,t.height-=2*s.top;var o,a,h={width:!0,height:!!this._noOverflow||!this.view.options.overflow.y},r=Fit.within(t,i,h),d=$.extend({},r),l=(this.content,0),u="inside"===this._ui,c=u?this.infoInside:this.info,p=u?this.captionInside:this.caption,f=u?this.posInside:this.pos,m=!!p;switch(this._ui){case"outside":var v=$.extend({},d);this.caption&&(a=this.caption,this._whileVisible($.proxy(function(){for(var i=0;i<2;){l=this._getInfoHeight(d.width);var e=t.height-d.height;e<l&&(d=Fit.within({width:d.width,height:Math.max(d.height-(l-e),0)},d,h)),i++}l=this._getInfoHeight(d.width),(!this.view.options.overflow.y&&l+d.height>t.height||c&&"none"===c.css("display")||l>=.5*d.height)&&(m=!1,l=0,d=v)},this),a)),c&&c.css({width:d.width+"px"}),o={width:d.width,height:d.height+l};break;case"inside":this.caption&&(a=p,this._whileVisible($.proxy(function(){(l=this._getInfoHeight(d.width))>=.45*d.height&&(m=!1,l=0)},this),a)),o=d;break;case"fullclick":var g=[];p&&g.push(p),this._whileVisible($.proxy(function(){if((p||f)&&c.css({width:"100%"}),l=this._getInfoHeight(Window._boxDimensions.width),p&&l>.5*t.height)if(m=!1,f){var i=this.caption.is(":visible");this.caption.hide(),l=this._getInfoHeight(Window._boxDimensions.width),i&&this.caption.show()}else l=0;d=Fit.within({width:t.width,height:Math.max(0,t.height-l)},d,h),o=d},this),g),this.content.css({"padding-bottom":0})}p&&p[m?"show":"hide"](),this.element[(m?"remove":"add")+"Class"]("fr-no-caption"),this.element[(m?"add":"remove")+"Class"]("fr-has-caption"),this.content.css(d),this.background.css(o),this.playerIframe&&this.playerIframe.attr(d),this.overlap={y:o.height+("fullclick"===this._ui?l:0)-Window._boxDimensions.height,x:0},this._track=!this._noOverflow&&this.view.options.overflow.y&&0<this.overlap.y,this._infoHeight=l,this._padding=s,this._contentDimensions=d,this._backgroundDimensions=o,Pages[(this._track?"set":"remove")+"Tracking"](this._position),this.position()}},position:function(){if(this.content){var i=this._contentDimensions,e=this._backgroundDimensions,t={top:.5*Window._boxDimensions.height-.5*e.height,left:.5*Window._boxDimensions.width-.5*e.width},s={top:t.top+i.height,left:t.left},n=0,o="inside"===this._ui?this.infoInside:this.info;switch(this._ui){case"fullclick":t.top=.5*(Window._boxDimensions.height-this._infoHeight)-.5*e.height,s={top:Window._boxDimensions.height-this._infoHeight,left:0,bottom:"auto"},n=this._infoHeight;break;case"inside":s={top:"auto",left:0,bottom:0}}if(0<this.overlap.y){var a=Pages.getXYP();switch(t.top=0-a.y*this.overlap.y,this._ui){case"outside":case"fullclick":s.top=Window._boxDimensions.height-this._infoHeight;break;case"inside":var h=t.top+i.height-Window._boxDimensions.height,r=-1*t.top;if(s.bottom=h,this.closeInside.css({top:r}),1<this._total){var d=Window.element.is(":visible");d||Window.element.show();var l=this.previousInside.attr("style");this.previousInside.removeAttr("style");var u=parseInt(this.previousInside.css("margin-top"));this.previousInside.attr({style:l}),d||Window.element.hide();var c=this.previousInside.add(this.nextInside),p=.5*this.overlap.y;c.css({"margin-top":u+(r-p)}),this.positionInside&&this.positionInside.css({bottom:h})}}}else"inside"===this._ui&&this.element.find(".fr-info, .fr-side, .fr-close, .fr-position-inside").removeAttr("style");o&&o.css(s),this.container.css({bottom:n}),this.content.css(t),this.background.css(t)}}}),Oc),Lc,Mc,Nc;function Oc(){return this.initialize.apply(this,_slice.call(arguments))}var Pages={initialize:function(i){this.element=i,this.pages=[],this.uid=1,this._tracking=[]},load:function(i){this.views=i,this.removeAll(),$.each(i,$.proxy(function(i,e){this.pages.push(new Page(e,i+1,this.views.length))},this))},show:function(i,e){var t=this.pages[i-1];this.page&&this.page.uid===t.uid||(this.page=t,Thumbnails.show(i),Window.updateBoxDimensions(),t.show($.proxy(function(){e&&e()},this)))},getPositionInActivePageGroup:function(t){var s=0;return $.each(this.pages,function(i,e){e.view.element&&e.view.element===t&&(s=i+1)}),s},getLoadingCount:function(){var t=0;return $.each(this.pages,function(i,e){e.loading&&t++}),t},removeAll:function(){$.each(this.pages,function(i,e){e.remove()}),this.pages=[]},hideInactive:function(t,s){var n=[];$.each(this.pages,$.proxy(function(i,e){e.uid!==this.page.uid&&n.push(e)},this));var o=0+n.length;return o<1?t&&t():$.each(n,function(i,e){e.hide(function(){t&&--o<1&&t()},s)}),n.length},stopInactive:function(){$.each(this.pages,$.proxy(function(i,e){e.uid!==this.page.uid&&e.stop()},this))},stop:function(){$.each(this.pages,function(i,e){e.stop()})},handleTracking:function(i){Browser.IE&&Browser.IE<9?(this.setXY({x:i.pageX,y:i.pageY}),this.updatePositions()):this._tracking_timer=setTimeout($.proxy(function(){this.setXY({x:i.pageX,y:i.pageY}),this.updatePositions()},this),30)},clearTrackingTimer:function(){this._tracking_timer&&(clearTimeout(this._tracking_timer),this._tracking_timer=null)},startTracking:function(){Support.mobileTouch||this._handleTracking||$(document.documentElement).on("mousemove",this._handleTracking=$.proxy(this.handleTracking,this))},stopTracking:function(){!Support.mobileTouch&&this._handleTracking&&($(document.documentElement).off("mousemove",this._handleTracking),this._handleTracking=null,this.clearTrackingTimer())},setTracking:function(i){this.isTracking(i)||(this._tracking.push(this.pages[i-1]),1===this._tracking.length&&this.startTracking())},clearTracking:function(){this._tracking=[]},removeTracking:function(e){this._tracking=$.grep(this._tracking,function(i){return i._position!==e}),this._tracking.length<1&&this.stopTracking()},isTracking:function(t){var s=!1;return $.each(this._tracking,function(i,e){if(e._position===t)return!(s=!0)}),s},setXY:function(i){this._xy=i},getXYP:function(){var i=Pages.page,t=$.extend({},Window._boxDimensions),e=$.extend({},this._xy);e.y-=$(window).scrollTop(),i&&("outside"===i._ui||"fullclick"===i._ui)&&0<i._infoHeight&&(t.height-=i._infoHeight),e.y-=Window._boxPosition.top;var s={x:0,y:Math.min(Math.max(e.y/t.height,0),1)},n={x:"width",y:"height"},o={};return $.each("y".split(" "),$.proxy(function(i,e){o[e]=Math.min(Math.max(20/t[n[e]],0),1),s[e]*=1+2*o[e],s[e]-=o[e],s[e]=Math.min(Math.max(s[e],0),1)},this)),this.setXYP(s),this._xyp},setXYP:function(i){this._xyp=i},updatePositions:function(){this._tracking.length<1||$.each(this._tracking,function(i,e){e.position()})}};function View(){this.initialize.apply(this,_slice.call(arguments))}$.extend(View.prototype,{initialize:function(object){var options=arguments[1]||{},data={};if("string"===$.type(object))object={url:object};else if(object&&1===object.nodeType){var element=$(object);object={element:element[0],url:element.attr("href"),caption:element.attr("data-fresco-caption"),group:element.attr("data-fresco-group"),extension:element.attr("data-fresco-extension"),type:element.attr("data-fresco-type"),options:element.attr("data-fresco-options")&&eval("({"+element.attr("data-fresco-options")+"})")||{}}}return object&&(object.extension||(object.extension=detectExtension(object.url)),object.type||(data=getURIData(object.url),object._data=data,object.type=data.type)),object._data||(object._data=getURIData(object.url)),object&&object.options?object.options=$.extend(!0,$.extend({},options),$.extend({},object.options)):object.options=$.extend({},options),object.options=Options.create(object.options,object.type,object._data),$.extend(this,object),this}});var Spinner={supported:Support.css.transform&&Support.css.animation,initialize:function(i){this.element=$("<div>").addClass("fr-spinner").hide();for(var e=1;e<=12;e++)this.element.append($("<div>").addClass("fr-spin-"+e));this.element.on("click",$.proxy(function(){Window.hide()},this)),this.element.on("fresco:mousewheel",function(i){i.preventDefault()})},setSkin:function(i){this.supported&&(this._skin&&this.element.removeClass("fr-spinner-skin-"+this._skin),this.updateDimensions(),this.element.addClass("fr-spinner-skin-"+i),this._skin=i)},updateDimensions:function(){var i=this._attached;i||this.attach(),this._dimensions={width:this.element.outerWidth(),height:this.element.outerHeight()},i||this.detach()},attach:function(){this._attached||($(document.body).append(this.element),this._attached=!0)},detach:function(){this._attached&&(this.element.detach(),this._attached=!1)},show:function(i,e){this._visible=!0,this.attach(),this.center();var t=Pages.page&&Pages.page.view.options.effects.spinner.show||0,s=("number"===$.type(e)?e:t)||0;this.element.stop(!0).fadeTo(s,1,i)},hide:function(i,e,t){this._visible=!1;var s=Pages.page&&Pages.page.view.options.effects.spinner.hide||0,n=("number"===$.type(e)?e:s)||0;this.element.stop(!0).fadeOut(n||0,$.proxy(function(){this.detach(),i&&i()},this))},center:function(){if(this.supported){this._dimensions||this.updateDimensions();var i=Pages.page,e=0;i&&"fullclick"===i._ui&&i._whileVisible(function(){e=i._getInfoHeight(Window._boxDimensions.width)}),this.element.css({top:Window._boxPosition.top+.5*Window._boxDimensions.height-.5*this._dimensions.height-.5*e,left:Window._boxPosition.left+.5*Window._boxDimensions.width-.5*this._dimensions.width})}}},_Fresco={_disabled:!1,_fallback:!0,initialize:function(){Window.initialize(),this._disabled||this.startDelegating()},startDelegating:function(){this._delegateHandler||$(document.documentElement).on("click",".fresco[href]",this._delegateHandler=$.proxy(this.delegate,this)).on("click",this._setClickXYHandler=$.proxy(this.setClickXY,this))},stopDelegating:function(){this._delegateHandler&&($(document.documentElement).off("click",".fresco[href]",this._delegateHandler).off("click",this._setClickXYHandler),this._setClickXYHandler=null,this._delegateHandler=null)},setClickXY:function(i){Pages.setXY({x:i.pageX,y:i.pageY})},delegate:function(i){if(!this._disabled){i.stopPropagation(),i.preventDefault();var e=i.currentTarget;this.setClickXY(i),_Fresco.show(e)}},show:function(object){if(this._disabled)this.showFallback.apply(_Fresco,_slice.call(arguments));else{var options=arguments[1]||{},position=arguments[2];arguments[1]&&"number"===$.type(arguments[1])&&(position=arguments[1],options={});var views=[],object_type,isElement=_.isElement(object);switch(object_type=$.type(object)){case"string":case"object":var view=new View(object,options),_dgo="data-fresco-group-options",groupOptions={};if(view.group){if(isElement){var elements=$('.fresco[data-fresco-group="'+$(object).attr("data-fresco-group")+'"]');elements.filter("["+_dgo+"]").each(function(i,element){$.extend(groupOptions,eval("({"+($(element).attr(_dgo)||"")+"})"))}),elements.each(function(i,e){position||e!==object||(position=i+1),views.push(new View(e,$.extend({},groupOptions,options)))})}}else isElement&&$(object).is("["+_dgo+"]")&&($.extend(groupOptions,eval("({"+($(object).attr(_dgo)||"")+"})")),view=new View(object,$.extend({},groupOptions,options))),views.push(view);break;case"array":$.each(object,function(i,e){var t=new View(e,options);views.push(t)})}var groupExtend={grouped:{caption:!1}},firstUI=views[0].options.ui,positionInAPG;$.each(views,function(i,e){e.caption&&(groupExtend.grouped.caption=!0),0<i&&e.options.ui!==firstUI&&(e.options.ui=firstUI)}),$.each(views,function(i,e){e=$.extend(e,groupExtend)}),(!position||position<1)&&(position=1),position>views.length&&(position=views.length),isElement&&(positionInAPG=Pages.getPositionInActivePageGroup(object))?Window.setPosition(positionInAPG):Window.load(views,position)}},showFallback:function(i){if(this._fallback){var e=function i(e){var t=$.type(e);return"string"===t?e:"array"===t&&e[0]?i(e[0]):_.isElement(e)&&$(e).attr("href")?$(e).attr("href"):!!e.url&&e.url}(i);e&&(window.location.href=e)}}};$.extend(Fresco,{show:function(i){return _Fresco.show.apply(_Fresco,_slice.call(arguments)),this},hide:function(){return Window.hide(),this},disable:function(){return _Fresco.stopDelegating(),_Fresco._disabled=!0,this},enable:function(){return _Fresco._disabled=!1,_Fresco.startDelegating(),this},fallback:function(i){return _Fresco._fallback=i,this},setDefaultSkin:function(i){return Options.defaults.skin=i,this}}),(Browser.IE&&Browser.IE<7||"number"===$.type(Browser.Android)&&Browser.Android<3||Browser.MobileSafari&&"number"===$.type(Browser.WebKit)&&Browser.WebKit<533.18)&&(_Fresco.show=_Fresco.showFallback);var Thumbnails={initialize:function(i){this.element=i,this._thumbnails=[],this._orientation="vertical",this._vars={thumbnail:{},thumbnailFrame:{},thumbnails:{}},this.build(),this.startObserving()},build:function(){this.element.append(this.wrapper=$("<div>").addClass("fr-thumbnails-wrapper").append(this._slider=$("<div>").addClass("fr-thumbnails-slider").append(this._previous=$("<div>").addClass("fr-thumbnails-side fr-thumbnails-side-previous").append(this._previous_button=$("<div>").addClass("fr-thumbnails-side-button").append($("<div>").addClass("fr-thumbnails-side-button-background")).append($("<div>").addClass("fr-thumbnails-side-button-icon")))).append(this._thumbs=$("<div>").addClass("fr-thumbnails-thumbs").append(this._slide=$("<div>").addClass("fr-thumbnails-slide"))).append(this._next=$("<div>").addClass("fr-thumbnails-side fr-thumbnails-side-next").append(this._next_button=$("<div>").addClass("fr-thumbnails-side-button").append($("<div>").addClass("fr-thumbnails-side-button-background")).append($("<div>").addClass("fr-thumbnails-side-button-icon"))))))},startObserving:function(){this._slider.delegate(".fr-thumbnail","click",$.proxy(function(i){i.stopPropagation();var e=$(i.target).closest(".fr-thumbnail")[0],t=e&&$(e).data("fr-position");t&&(this.setActive(t),Window.setPosition(t))},this)),this._slider.bind("click",function(i){i.stopPropagation()}),this._previous.bind("click",$.proxy(this.previousPage,this)),this._next.bind("click",$.proxy(this.nextPage,this))},load:function(i){this.clear();var t="horizontal",s=!1;$.each(i,$.proxy(function(i,e){"vertical"===e.options.thumbnails&&(t="vertical"),e.options.thumbnails||(s=!0)},this)),this.setOrientation(t),this._disabledGroup=s,$.each(i,$.proxy(function(i,e){this._thumbnails.push(new Thumbnail(e,i+1))},this)),this.fitToViewport()},clear:function(){$.each(this._thumbnails,function(i,e){e.remove()}),this._thumbnails=[],this._position=-1,this._page=-1},setOrientation:function(i){this._orientation&&Window.element.removeClass("fr-thumbnails-"+this._orientation),Window.element.addClass("fr-thumbnails-"+i),this._orientation=i},disable:function(){Window.element.removeClass("fr-thumbnails-enabled").addClass("fr-thumbnails-disabled"),this._disabled=!0},enable:function(){Window.element.removeClass("fr-thumbnails-disabled").addClass("fr-thumbnails-enabled"),this._disabled=!1},enabled:function(){return!this._disabled},disabled:function(){return this._disabled},updateVars:function(){var i=Window.element,e=this._vars,t="horizontal"===this._orientation,s=t?"top":"left",n=t?"left":"top",o=t?"bottom":"left",a=t?"top":"right",h=t?"width":"height",r=t?"height":"width",d={left:"right",right:"left",top:"bottom",bottom:"top"};this.element.removeClass("fr-thumbnails-measured");var l=i.is(":visible");if(l||i.show(),this.disabled()&&this.enable(),!this.element.is(":visible")||this._thumbnails.length<2||this._disabledGroup)return this.disable(),$.extend(this._vars.thumbnails,{width:0,height:0}),l||i.hide(),void this.element.addClass("fr-thumbnails-measured");this.enable();var u=this._previous,c=this._next,p=Bounds.viewport(),f=this.element["inner"+_.String.capitalize(r)](),m=parseInt(this._thumbs.css("padding-"+s))||0,v=Math.max(f-2*m,0),g=parseInt(this._thumbs.css("padding-"+n))||0,w=(parseInt(this.element.css("margin-"+o))||0)+(parseInt(this.element.css("margin-"+a))||0);$.extend(e.thumbnails,{height:f+w,width:p[t?"width":"height"],paddingTop:m}),$.extend(e.thumbnail,{height:v,width:v}),$.extend(e.thumbnailFrame,{width:v+2*g,height:f}),e.sides={previous:{width:c["inner"+_.String.capitalize(h)](),marginLeft:parseInt(u.css("margin-"+n))||0,marginRight:parseInt(u.css("margin-"+d[n]))||0},next:{width:c["inner"+_.String.capitalize(h)](),marginLeft:parseInt(c.css("margin-"+n))||0,marginRight:parseInt(c.css("margin-"+d[n]))||0}};var b=p[h],y=e.thumbnailFrame.width,x=this._thumbnails.length;e.thumbnails.width=b,e.sides.enabled=1<x*y/b;var k=b,C=e.sides,S=C.previous,W=C.next,M=S.marginLeft+S.width+S.marginRight+W.marginLeft+W.width+W.marginRight;e.sides.enabled&&(k-=M);var T=x*y;T<(k=Math.floor(k/y)*y)&&(k=T);var I=k+(e.sides.enabled?M:0);e.ipp=Math.round(k/y),this._mode="page",e.ipp<=1&&(I=k=b,e.sides.enabled=!1,this._mode="center"),e.pages=Math.ceil(x*y/k),e.wrapper={width:I+1,height:f},e.thumbs={width:k,height:f},e.slide={width:x*y+1,height:f},l||i.hide(),this.element.addClass("fr-thumbnails-measured")},hide:function(){this.disable(),this.thumbnails.hide(),this._visible=!1},getDimensions:function(){var i="horizontal"===this._orientation;return{width:i?this._vars.thumbnails.width:this._vars.thumbnails.height,height:i?this._vars.thumbnails.height:this._vars.thumbnails.width}},fitToViewport:function(){if(this.updateVars(),!this.disabled()){var i=$.extend({},this._vars),e="horizontal"===this._orientation;$.each(this._thumbnails,function(i,e){e.resize()}),this._previous[i.sides.enabled?"show":"hide"](),this._next[i.sides.enabled?"show":"hide"](),this._thumbs.css({width:i.thumbs[e?"width":"height"],height:i.thumbs[e?"height":"width"]}),this._slide.css({width:i.slide[e?"width":"height"],height:i.slide[e?"height":"width"]});var t={width:i.wrapper[e?"width":"height"],height:i.wrapper[e?"height":"width"]};t["margin-"+(e?"left":"top")]=Math.round(-.5*i.wrapper.width)+"px",t["margin-"+(e?"top":"left")]=0,this.wrapper.css(t),this._position&&this.moveTo(this._position,!0)}},moveToPage:function(i){if(!(i<1||i>this._vars.pages||i===this._page)){var e=this._vars.ipp*(i-1)+1;this.moveTo(e)}},previousPage:function(){this.moveToPage(this._page-1)},nextPage:function(){this.moveToPage(this._page+1)},show:function(i){var e=this._position<0;i<1&&(i=1);var t=this._thumbnails.length;t<i&&(i=t),this._position=i,this.setActive(i),"page"===this._mode&&this._page===Math.ceil(i/this._vars.ipp)||this.moveTo(i,e)},moveTo:function(i,e){if(this.updateVars(),!this.disabled()){var t,s,n="horizontal"===this._orientation,o=.5*Bounds.viewport()[n?"width":"height"],a=this._vars.thumbnailFrame.width;if("page"===this._mode){s=Math.ceil(i/this._vars.ipp),this._page=s,t=a*(this._page-1)*this._vars.ipp*-1;var h="fr-thumbnails-side-button-disabled";this._previous_button[(s<2?"add":"remove")+"Class"](h),this._next_button[(s>=this._vars.pages?"add":"remove")+"Class"](h)}else t=o+-1*(a*(i-1)+.5*a);s=Pages.page;var r={},d={};r[n?"top":"left"]=0,d[n?"left":"top"]=t+"px",this._slide.stop(!0).css(r).animate(d,e?0:s&&s.view.options.effects.thumbnails.slide||0,$.proxy(function(){this.loadCurrentPage()},this))}},loadCurrentPage:function(){var i,e;if(this._position&&this._vars.thumbnailFrame.width&&!(this._thumbnails.length<1)){if("page"===this._mode){if(this._page<1)return;i=(this._page-1)*this._vars.ipp+1,e=Math.min(i-1+this._vars.ipp,this._thumbnails.length)}else{var t=Math.ceil(this._vars.thumbnails.width/this._vars.thumbnailFrame.width);i=Math.max(Math.floor(Math.max(this._position-.5*t,0)),1),e=Math.ceil(Math.min(this._position+.5*t)),this._thumbnails.length<e&&(e=this._thumbnails.length)}for(var s=i;s<=e;s++)this._thumbnails[s-1].load()}},setActive:function(i){this._slide.find(".fr-thumbnail-active").removeClass("fr-thumbnail-active");var e=i&&this._thumbnails[i-1];e&&e.activate()},refresh:function(){this._position&&this.setPosition(this._position)}};function Thumbnail(){this.initialize.apply(this,_slice.call(arguments))}$.extend(Thumbnail.prototype,{initialize:function(i,e){this.view=i,this._position=e,this.preBuild()},preBuild:function(){this.thumbnail=$("<div>").addClass("fr-thumbnail").data("fr-position",this._position)},build:function(){if(!this.thumbnailFrame){var i=this.view.options;Thumbnails._slide.append(this.thumbnailFrame=$("<div>").addClass("fr-thumbnail-frame").append(this.thumbnail.append(this.thumbnailWrapper=$("<div>").addClass("fr-thumbnail-wrapper")))),"image"===this.view.type&&this.thumbnail.addClass("fr-load-thumbnail").data("thumbnail",{view:this.view,src:i.thumbnail||this.view.url});var e=i.thumbnail&&i.thumbnail.icon;e&&this.thumbnail.append($("<div>").addClass("fr-thumbnail-icon fr-thumbnail-icon-"+e)),this.thumbnail.append($("<div>").addClass("fr-thumbnail-overlay").append($("<div>").addClass("fr-thumbnail-overlay-background")).append(this.loading=$("<div>").addClass("fr-thumbnail-loading").append($("<div>").addClass("fr-thumbnail-loading-background")).append(this.spinner=$("<div>").addClass("fr-thumbnail-spinner").hide().append($("<div>").addClass("fr-thumbnail-spinner-spin")))).append($("<div>").addClass("fr-thumbnail-overlay-border"))),this.thumbnail.append($("<div>").addClass("fr-thumbnail-state")),this.resize()}},remove:function(){this.thumbnailFrame&&(this.thumbnailFrame.remove(),this.thumbnailFrame=null,this.image=null),this.ready&&(this.ready.abort(),this.ready=null),this.vimeoThumbnail&&(this.vimeoThumbnail.abort(),this.vimeoThumbnail=null),this._loading=!1,this._removed=!0,this.view=null,this._clearDelay()},load:function(){if(!(this._loaded||this._loading||this._removed)){this.thumbnailWrapper||this.build(),this._loading=!0;var i=this.view.options.thumbnail,e=i&&"boolean"===$.type(i)?this.view.url:i||this.view.url;if(this._url=e)if("vimeo"===this.view.type)if(e===i)this._url=e,this._load(this._url);else switch(this.view.type){case"vimeo":this.vimeoThumbnail=new VimeoThumbnail(this.view.url,$.proxy(function(i){this._url=i,this._load(i)},this),$.proxy(function(){this._error()},this))}else this._load(this._url)}},activate:function(){this.thumbnail.addClass("fr-thumbnail-active")},_load:function(i){this.thumbnailWrapper.prepend(this.image=$("<img>").addClass("fr-thumbnail-image").attr({src:i}).css({opacity:1e-4})),this.fadeInSpinner(),this.ready=new ImageReady(this.image[0],$.proxy(function(i){var e=i.img;this.thumbnailFrame&&this._loading&&(this._loaded=!0,this._loading=!1,this._dimensions={width:e.naturalWidth,height:e.naturalHeight},this.resize(),this.show())},this),$.proxy(function(){this._error()},this),{method:this.view.options.loadedMethod})},_error:function(){this._loaded=!0,this._loading=!1,this.thumbnail.addClass("fr-thumbnail-error"),this.image&&this.image.hide(),this.thumbnailWrapper.append($("<div>").addClass("fr-thumbnail-image")),this.show()},fadeInSpinner:function(){if(Spinner.supported&&this.view.options.spinner){this._clearDelay();var i=this.view.options.effects.thumbnail;this._delay=setTimeout($.proxy(function(){this.spinner.stop(!0).fadeTo(i.show||0,1)},this),this.view.options.spinnerDelay||0)}},show:function(){this._clearDelay();var i=this.view.options.effects.thumbnail;this.loading.stop(!0).delay(i.delay).fadeTo(i.show,0)},_clearDelay:function(){this._delay&&(clearTimeout(this._delay),this._delay=null)},resize:function(){if(this.thumbnailFrame){var i="horizontal"===Thumbnails._orientation;if(this.thumbnailFrame.css({width:Thumbnails._vars.thumbnailFrame[i?"width":"height"],height:Thumbnails._vars.thumbnailFrame[i?"height":"width"]}),this.thumbnailFrame.css({top:i?0:Thumbnails._vars.thumbnailFrame.width*(this._position-1),left:i?Thumbnails._vars.thumbnailFrame.width*(this._position-1):0}),this.thumbnailWrapper){var e=Thumbnails._vars.thumbnail;if(this.thumbnail.css({width:e.width,height:e.height,"margin-top":Math.round(-.5*e.height),"margin-left":Math.round(-.5*e.width),"margin-bottom":0,"margin-right":0}),this._dimensions){var t,s={width:e.width,height:e.height},n=Math.max(s.width,s.height),o=$.extend({},this._dimensions);if(o.width>s.width&&o.height>s.height){var a=1,h=1;(t=Fit.within(s,o)).width<s.width&&(a=s.width/t.width),t.height<s.height&&(h=s.height/t.height);var r=Math.max(a,h);1<r&&(t.width*=r,t.height*=r),$.each("width height".split(" "),function(i,e){t[e]=Math.round(t[e])})}else t=Fit.within(this._dimensions,o.width<s.width||o.height<s.height?{width:n,height:n}:s);var d=Math.round(.5*s.width-.5*t.width),l=Math.round(.5*s.height-.5*t.height);this.image.removeAttr("style").css($.extend({},t,{top:l,left:d}))}}}}});var UI={_modes:["fullclick","outside","inside"],_ui:!1,_validClickTargetSelector:[".fr-content-element",".fr-content",".fr-content > .fr-stroke",".fr-content > .fr-stroke .fr-stroke-color"].join(", "),initialize:function(i){$.each(this._modes,$.proxy(function(i,e){this[e].initialize()},this)),Window.element.addClass("fr-ui-inside-hidden fr-ui-fullclick-hidden")},set:function(i){this._ui&&(Window.element.removeClass("fr-window-ui-"+this._ui),Overlay.element.removeClass("fr-overlay-ui-"+this._ui)),Window.element.addClass("fr-window-ui-"+i),Overlay.element.addClass("fr-overlay-ui-"+i),this._enabled&&this._ui&&this._ui!==i&&(this[this._ui].disable(),this[i].enable(),UI[i].show()),this._ui=i},_onWindowResize:function(){Support.mobileTouch&&this.show()},enable:function(){$.each(this._modes,$.proxy(function(i,e){UI[e][e===this._ui?"enable":"disable"]()},this)),this._enabled=!0},disable:function(){$.each(this._modes,$.proxy(function(i,e){UI[e].disable()},this)),this._enabled=!1},adjustPrevNext:function(i,e){UI[this._ui].adjustPrevNext(i,e)},show:function(i,e){UI[this._ui].show(i,e)},hide:function(i,e){UI[this._ui].hide(i,e)},reset:function(){$.each(this._modes,$.proxy(function(i,e){UI[e].reset()},this))},update:function(){var i=Pages.page;i&&this.set(i._ui)}};return UI.fullclick={initialize:function(){this.build(),this._scrollLeft=-1},build:function(){Window._box.append(this._previous=$("<div>").addClass("fr-side fr-side-previous fr-side-previous-fullclick fr-toggle-ui").append($("<div>").addClass("fr-side-button").append($("<div>").addClass("fr-side-button-background")).append($("<div>").addClass("fr-side-button-icon")))).append(this._next=$("<div>").addClass("fr-side fr-side-next fr-side-next-fullclick fr-toggle-ui").append($("<div>").addClass("fr-side-button").append($("<div>").addClass("fr-side-button-background")).append($("<div>").addClass("fr-side-button-icon")))).append(this._close=$("<div>").addClass("fr-close fr-close-fullclick").append($("<div>").addClass("fr-close-background")).append($("<div>").addClass("fr-close-icon"))),Browser.IE&&Browser.IE<=7&&this._previous.add(this._next).add(this._close).hide(),this._close.on("click",$.proxy(function(i){i.preventDefault(),Window.hide()},this)),this._previous.on("click",$.proxy(function(i){Window.previous(),this._onMouseMove(i)},this)),this._next.on("click",$.proxy(function(i){Window.next(),this._onMouseMove(i)},this))},enable:function(){this.bind()},disable:function(){this.unbind()},reset:function(){Window.timers.clear("ui-fullclick"),this._x=-1,this._y=-1,this._scrollLeft=-1,this.resetPrevNext(),this._onMouseLeave()},resetPrevNext:function(){this._previous.add(this._next).stop(!0).removeAttr("style")},bind:function(){this._onMouseUpHandler||(this.unbind(),Window._pages.on("mouseup",".fr-container",this._onMouseUpHandler=$.proxy(this._onMouseUp,this)),Support.mobileTouch||(Window.element.on("mouseenter",this._showHandler=$.proxy(this.show,this)).on("mouseleave",this._hideHandler=$.proxy(this.hide,this)),Window.element.on("mousemove",this._mousemoveHandler=$.proxy(function(i){var e=i.pageX,t=i.pageY;this._hoveringSideButton||t===this._y&&e===this._x||(this._x=e,this._y=t,this.show(),this.startTimer())},this)),Window._pages.on("mousemove",".fr-container",this._onMouseMoveHandler=$.proxy(this._onMouseMove,this)).on("mouseleave",".fr-container",this._onMouseLeaveHandler=$.proxy(this._onMouseLeave,this)).on("mouseenter",".fr-container",this._onMouseEnterHandler=$.proxy(this._onMouseEnter,this)),Window.element.on("mouseenter",".fr-side",this._onSideMouseEnterHandler=$.proxy(this._onSideMouseEnter,this)).on("mouseleave",".fr-side",this._onSideMouseLeaveHandler=$.proxy(this._onSideMouseLeave,this)),$(window).on("scroll",this._onScrollHandler=$.proxy(this._onScroll,this))))},unbind:function(){this._onMouseUpHandler&&(Window._pages.off("mouseup",".fr-container",this._onMouseUpHandler),this._onMouseUpHandler=null,this._showHandler&&(Window.element.off("mouseenter",this._showHandler).off("mouseleave",this._hideHandler).off("mousemove",this._mousemoveHandler),Window._pages.off("mousemove",".fr-container",this._onMouseMoveHandler).off("mouseleave",".fr-container",this._onMouseLeaveHandler).off("mouseenter",".fr-container",this._onMouseEnterHandler),Window.element.off("mouseenter",".fr-side",this._onSideMouseEnterHandler).off("mouseleave",".fr-side",this._onSideMouseLeaveHandler),$(window).off("scroll",this._onScrollHandler),this._showHandler=null))},adjustPrevNext:function(i,e){var t=Pages.page;if(t){var s=Window.element.is(":visible");s||Window.element.show();var n=this._previous.attr("style");this._previous.removeAttr("style");var o=parseInt(this._previous.css("margin-top"));this._previous.attr({style:n}),s||Window.element.hide();var a=t._infoHeight||0,h=this._previous.add(this._next),r={"margin-top":o-.5*a},d="number"===$.type(e)?e:Pages.page&&Pages.page.view.options.effects.content.show||0;this.opening&&(d=0),h.stop(!0).animate(r,d,i),this._previous[(Window.mayPrevious()?"remove":"add")+"Class"]("fr-side-disabled"),this._next[(Window.mayNext()?"remove":"add")+"Class"]("fr-side-disabled"),h[(t._total<2?"add":"remove")+"Class"]("fr-side-hidden"),i&&i()}else i&&i()},_onScroll:function(){this._scrollLeft=$(window).scrollLeft()},_onMouseMove:function(i){if(!Support.mobileTouch){var e=this._getEventSide(i),t=_.String.capitalize(e),s=!!e&&Window["may"+t]();if(e!==this._hoveringSide||s!==this._mayClickHoveringSide)switch(this._hoveringSide=e,this._mayClickHoveringSide=s,Window._box[(s?"add":"remove")+"Class"]("fr-hovering-clickable"),e){case"previous":Window._box.addClass("fr-hovering-previous").removeClass("fr-hovering-next");break;case"next":Window._box.addClass("fr-hovering-next").removeClass("fr-hovering-previous")}}},_onMouseLeave:function(i){Window._box.removeClass("fr-hovering-clickable fr-hovering-previous fr-hovering-next"),this._hoveringSide=!1},_onMouseUp:function(i){if(!(1<i.which))if(1!==Pages.pages.length){var e=this._getEventSide(i);Window[e](),this._onMouseMove(i)}else Window.hide()},_onMouseEnter:function(i){this._onMouseMove(i)},_getEventSide:function(i){-1<this._scrollLeft?this._scrollLeft:this._scrollLeft=$(window).scrollLeft();return i.pageX-Window._boxPosition.left-this._scrollLeft<.5*Window._boxDimensions.width?"previous":"next"},_onSideMouseEnter:function(i){this._hoveringSideButton=!0,this._hoveringSide=this._getEventSide(i),this._mayClickHoveringSide=Window["may"+_.String.capitalize(this._hoveringSide)](),this.clearTimer()},_onSideMouseLeave:function(i){this._hoveringSideButton=!1,this._hoveringSide=!1,this._mayClickHoveringSide=!1,this.startTimer()},show:function(i){if(this._visible)return this.startTimer(),void("function"===$.type(i)&&i());this._visible=!0,this.startTimer(),Window.element.addClass("fr-visible-fullclick-ui").removeClass("fr-hidden-fullclick-ui"),Browser.IE&&Browser.IE<=7&&this._previous.add(this._next).add(this._close).show(),"function"===$.type(i)&&i()},hide:function(i){var e=Pages.page&&Pages.page.view.type;this._visible&&(!e||"youtube"!==e&&"vimeo"!==e)&&(this._visible=!1,Window.element.removeClass("fr-visible-fullclick-ui").addClass("fr-hidden-fullclick-ui")),"function"===$.type(i)&&i()},clearTimer:function(){Support.mobileTouch||Window.timers.clear("ui-fullclick")},startTimer:function(){Support.mobileTouch||(this.clearTimer(),Window.timers.set("ui-fullclick",$.proxy(function(){this.hide()},this),Window.view?Window.view.options.uiDelay:0))}},UI.inside={initialize:function(){},enable:function(){this.bind()},disable:function(){this.unbind()},bind:function(){this._onMouseUpHandler||(this.unbind(),Window._pages.on("mouseup",".fr-content",this._onMouseUpHandler=$.proxy(this._onMouseUp,this)),Window._pages.on("click",".fr-content .fr-close",$.proxy(function(i){i.preventDefault(),Window.hide()},this)).on("click",".fr-content .fr-side-previous",$.proxy(function(i){Window.previous(),this._onMouseMove(i)},this)).on("click",".fr-content .fr-side-next",$.proxy(function(i){Window.next(),this._onMouseMove(i)},this)),Window.element.on("click",".fr-container, .fr-thumbnails, .fr-thumbnails-wrapper",this._delegateOverlayCloseHandler=$.proxy(this._delegateOverlayClose,this)),Support.mobileTouch||(Window.element.on("mouseenter",".fr-content",this._showHandler=$.proxy(this.show,this)).on("mouseleave",".fr-content",this._hideHandler=$.proxy(this.hide,this)),Window.element.on("mousemove",".fr-content",this._mousemoveHandler=$.proxy(function(i){var e=i.pageX,t=i.pageY;this._hoveringSideButton||t===this._y&&e===this._x||(this._x=e,this._y=t,this.show(),this.startTimer())},this)),Window._pages.on("mousemove",".fr-info, .fr-close",$.proxy(function(i){i.stopPropagation(),this._onMouseLeave(i)},this)),Window._pages.on("mousemove",".fr-info",$.proxy(function(){this.clearTimer()},this)),Window._pages.on("mousemove",".fr-content",this._onMouseMoveHandler=$.proxy(this._onMouseMove,this)).on("mouseleave",".fr-content",this._onMouseLeaveHandler=$.proxy(this._onMouseLeave,this)).on("mouseenter",".fr-content",this._onMouseEnterHandler=$.proxy(this._onMouseEnter,this)),Window.element.on("mouseenter",".fr-side",this._onSideMouseEnterHandler=$.proxy(this._onSideMouseEnter,this)).on("mouseleave",".fr-side",this._onSideMouseLeaveHandler=$.proxy(this._onSideMouseLeave,this)),$(window).on("scroll",this._onScrollHandler=$.proxy(this._onScroll,this))))},unbind:function(){this._onMouseUpHandler&&(Window._pages.off("mouseup",".fr-content",this._onMouseUpHandler),this._onMouseUpHandler=null,Window._pages.off("click",".fr-content .fr-close").off("click",".fr-content .fr-side-previous").off("click",".fr-content .fr-side-next"),Window.element.off("click",".fr-container, .fr-thumbnails, .fr-thumbnails-wrapper",this._delegateOverlayCloseHandler),this._showHandler&&(Window.element.off("mouseenter",".fr-content",this._showHandler).off("mouseleave",".fr-content",this._hideHandler).off("mousemove",".fr-content",this._mousemoveHandler),Window._pages.off("mousemove",".fr-info, .fr-close"),Window._pages.off("mousemove",".fr-info"),Window._pages.off("mousemove",".fr-content-element",this._onMouseMoveHandler).off("mouseleave",".fr-content",this._onMouseLeaveHandler).off("mouseenter",".fr-content",this._onMouseEnterHandler),Window.element.off("mouseenter",".fr-side",this._onSideMouseEnterHandler).off("mouseleave",".fr-side",this._onSideMouseLeaveHandler),$(window).off("scroll",this._onScrollHandler),this._showHandler=null))},reset:function(){Window.timers.clear("ui-fullclick"),this._x=-1,this._y=-1,this._scrollLeft=-1,this._hoveringSide=!1,this._onMouseLeave()},adjustPrevNext:function(i){i&&i()},_onScroll:function(){this._scrollLeft=$(window).scrollLeft()},_delegateOverlayClose:function(i){var e=Pages.page;e&&e.view.options.overlay&&!e.view.options.overlay.close||$(i.target).is(".fr-container, .fr-thumbnails, .fr-thumbnails-wrapper")&&(i.preventDefault(),i.stopPropagation(),Window.hide())},_onMouseMove:function(i){if(!Support.mobileTouch){var e=this._getEventSide(i),t=_.String.capitalize(e),s=!!e&&Window["may"+t]();if((1===Pages.pages.length||Pages.page&&"close"===Pages.page.view.options.onClick)&&(e=!1),e!==this._hoveringSide||s!==this._mayClickHoveringSide)if(this._hoveringSide=e,this._mayClickHoveringSide=s,e)switch(Window._box[(s?"add":"remove")+"Class"]("fr-hovering-clickable"),e){case"previous":Window._box.addClass("fr-hovering-previous").removeClass("fr-hovering-next");break;case"next":Window._box.addClass("fr-hovering-next").removeClass("fr-hovering-previous")}else Window._box.removeClass("fr-hovering-clickable fr-hovering-previous fr-hovering-next")}},_onMouseLeave:function(i){Window._box.removeClass("fr-hovering-clickable fr-hovering-previous fr-hovering-next"),this._hoveringSide=!1},_onMouseUp:function(i){if(!(1<i.which)&&$(i.target).is(UI._validClickTargetSelector))if(1===Pages.pages.length||Pages.page&&"close"===Pages.page.view.options.onClick)Window.hide();else{var e=this._getEventSide(i);Window[e](),this._onMouseMove(i)}},_onMouseEnter:function(i){this._onMouseMove(i)},_getEventSide:function(i){-1<this._scrollLeft?this._scrollLeft:this._scrollLeft=$(window).scrollLeft();return i.pageX-Window._boxPosition.left-this._scrollLeft<.5*Window._boxDimensions.width?"previous":"next"},_onSideMouseEnter:function(i){this._hoveringSideButton=!0,this._hoveringSide=this._getEventSide(i),this._mayClickHoveringSide=Window["may"+_.String.capitalize(this._hoveringSide)](),this.clearTimer()},_onSideMouseLeave:function(i){this._hoveringSideButton=!1,this._hoveringSide=!1,this._mayClickHoveringSide=!1,this.startTimer()},show:function(i){if(this._visible)return this.startTimer(),void("function"===$.type(i)&&i());this._visible=!0,this.startTimer(),Window.element.addClass("fr-visible-inside-ui").removeClass("fr-hidden-inside-ui"),"function"===$.type(i)&&i()},hide:function(i){this._visible&&(this._visible=!1,Window.element.removeClass("fr-visible-inside-ui").addClass("fr-hidden-inside-ui")),"function"===$.type(i)&&i()},clearTimer:function(){Support.mobileTouch||Window.timers.clear("ui-inside")},startTimer:function(){Support.mobileTouch||(this.clearTimer(),Window.timers.set("ui-inside",$.proxy(function(){this.hide()},this),Window.view?Window.view.options.uiDelay:0))}},UI.outside={initialize:function(){this.build(),this._scrollLeft=-1},build:function(){Window._box.append(this._previous=$("<div>").addClass("fr-side fr-side-previous fr-side-previous-outside").append($("<div>").addClass("fr-side-button").append($("<div>").addClass("fr-side-button-background")).append($("<div>").addClass("fr-side-button-icon")))).append(this._next=$("<div>").addClass("fr-side fr-side-next fr-side-next-outside").append($("<div>").addClass("fr-side-button").append($("<div>").addClass("fr-side-button-background")).append($("<div>").addClass("fr-side-button-icon")))).append(this._close=$("<div>").addClass("fr-close fr-close-outside").append($("<div>").addClass("fr-close-background")).append($("<div>").addClass("fr-close-icon"))),Browser.IE&&Browser.IE<=7&&this._previous.add(this._next).add(this._close).hide(),this._close.on("click",$.proxy(function(i){i.preventDefault(),Window.hide()},this)),this._previous.on("click",$.proxy(function(i){Window.previous(),this._onMouseMove(i)},this)),this._next.on("click",$.proxy(function(i){Window.next(),this._onMouseMove(i)},this))},enable:function(){this.bind()},disable:function(){this.unbind()},reset:function(){Window.timers.clear("ui-outside"),this._x=-1,this._y=-1,this._scrollLeft=-1,this._onMouseLeave()},bind:function(){this._onMouseUpHandler||(this.unbind(),Window.element.on("mouseup",".fr-content",this._onMouseUpHandler=$.proxy(this._onMouseUp,this)),Window.element.on("click",".fr-container, .fr-thumbnails, .fr-thumbnails-wrapper",this._delegateOverlayCloseHandler=$.proxy(this._delegateOverlayClose,this)),Support.mobileTouch||(Window._pages.on("mousemove",".fr-content",this._onMouseMoveHandler=$.proxy(this._onMouseMove,this)).on("mouseleave",".fr-content",this._onMouseLeaveHandler=$.proxy(this._onMouseLeave,this)).on("mouseenter",".fr-content",this._onMouseEnterHandler=$.proxy(this._onMouseEnter,this)),Window.element.on("mouseenter",".fr-side",this._onSideMouseEnterHandler=$.proxy(this._onSideMouseEnter,this)).on("mouseleave",".fr-side",this._onSideMouseLeaveHandler=$.proxy(this._onSideMouseLeave,this)),$(window).on("scroll",this._onScrollHandler=$.proxy(this._onScroll,this))))},unbind:function(){this._onMouseUpHandler&&(Window.element.off("mouseup",".fr-content",this._onMouseUpHandler),this._onMouseUpHandler=null,Window.element.off("click",".fr-container, .fr-thumbnails, .fr-thumbnails-wrapper",this._delegateOverlayCloseHandler),this._onMouseMoveHandler&&(Window._pages.off("mousemove",".fr-content",this._onMouseMoveHandler).off("mouseleave",".fr-content",this._onMouseLeaveHandler).off("mouseenter",".fr-content",this._onMouseEnterHandler),Window.element.off("mouseenter",".fr-side",this._onSideMouseEnterHandler).off("mouseleave",".fr-side",this._onSideMouseLeaveHandler),$(window).off("scroll",this._onScrollHandler),this._onMouseMoveHandler=null))},adjustPrevNext:function(i,e){var t=Pages.page;if(t){var s=this._previous.add(this._next);this._previous[(Window.mayPrevious()?"remove":"add")+"Class"]("fr-side-disabled"),this._next[(Window.mayNext()?"remove":"add")+"Class"]("fr-side-disabled"),s[(t._total<2?"add":"remove")+"Class"]("fr-side-hidden"),i&&i()}else i&&i()},_onScroll:function(){this._scrollLeft=$(window).scrollLeft()},_delegateOverlayClose:function(i){var e=Pages.page;e&&e.view.options.overlay&&!e.view.options.overlay.close||$(i.target).is(".fr-container, .fr-thumbnails, .fr-thumbnails-wrapper")&&(i.preventDefault(),i.stopPropagation(),Window.hide())},_onMouseMove:function(i){if(!Support.mobileTouch){var e=this._getEventSide(i),t=_.String.capitalize(e),s=!!e&&Window["may"+t]();if((1===Pages.pages.length||Pages.page&&"close"===Pages.page.view.options.onClick)&&(e=!1),e!==this._hoveringSide||s!==this._mayClickHoveringSide)if(this._hoveringSide=e,this._mayClickHoveringSide=s,e)switch(Window._box[(s?"add":"remove")+"Class"]("fr-hovering-clickable"),e){case"previous":Window._box.addClass("fr-hovering-previous").removeClass("fr-hovering-next");break;case"next":Window._box.addClass("fr-hovering-next").removeClass("fr-hovering-previous")}else Window._box.removeClass("fr-hovering-clickable fr-hovering-previous fr-hovering-next")}},_onMouseLeave:function(i){Window._box.removeClass("fr-hovering-clickable fr-hovering-previous fr-hovering-next"),this._hoveringSide=!1},_onMouseUp:function(i){if(!(1<i.which)&&$(i.target).is(UI._validClickTargetSelector))if(1===Pages.pages.length||Pages.page&&"close"===Pages.page.view.options.onClick)Window.hide();else{var e=this._getEventSide(i);Window[e](),this._onMouseMove(i)}},_onMouseEnter:function(i){this._onMouseMove(i)},_getEventSide:function(i){-1<this._scrollLeft?this._scrollLeft:this._scrollLeft=$(window).scrollLeft();return i.pageX-Window._boxPosition.left-this._scrollLeft<.5*Window._boxDimensions.width?"previous":"next"},show:function(){Browser.IE&&Browser.IE<=7&&this._previous.add(this._next).add(this._close).show()},hide:function(){},_onSideMouseEnter:function(i){this._hoveringSideButton=!0,this._hoveringSide=this._getEventSide(i),this._mayClickHoveringSide=Window["may"+_.String.capitalize(this._hoveringSide)]()},_onSideMouseLeave:function(i){this._hoveringSideButton=!1,this._hoveringSide=!1,this._mayClickHoveringSide=!1},clearTimer:function(){}},$(document).ready(function(i){_Fresco.initialize()}),Fresco});